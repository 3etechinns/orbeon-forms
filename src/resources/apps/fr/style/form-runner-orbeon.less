// Copyright (C) 2012 Orbeon, Inc.
//
// This program is free software; you can redistribute it and/or modify it under the terms of the
// GNU Lesser General Public License as published by the Free Software Foundation; either version
// 2.1 of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
// without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
// See the GNU Lesser General Public License for more details.
//
// The full text of the license is available at http://www.gnu.org/copyleft/lesser.html

@error: #B94A48;

@import "bootstrap-src/less/variables";
@import "bootstrap-src/less/mixins";
@import "form-runner-common";

html, body { background-color: @frBackground }

/* ***** Headings (titles and sections) ***************************************************************************** */

.xforms-form {
    h2, h3 {
        #gradient > .vertical(#fff, #eee);
        margin: 1em 0;
    }

    h2, h3, h4, h5, h6 {
        text-align: left;
        font-weight: normal;
        clear: left;
        padding: 0;
        color: #555;                                    /* Lighter grey to compensate for larger title font */
    }

    h2 {
        font-size: 20px;
        margin: .5em 0 .5em 0;
    }

    h2 .fr-section-label {
        border-bottom: 2px solid #eee;                  /* Line under title */
        display: block;                                 /* So the line expands all the way to the right */
    }

    h3, h4 {
        font-size: 110%;
        line-height: 135%;
        margin: 1em 0 1em 0;
    }
}

/* ***** Other ****************************************************************************************************** */

.fr-orbeon-version {
    text-align: center;
    font-size: smaller;
    padding: 10px;
    color: #6E6E6E;
}

.fr-explanation .xforms-output {
    display: block;
    font-style: italic;
    padding: 1em;
    background-color: #f8f8f8
}

.xforms-alert-active {
    font-weight: bold;
    font-size: smaller;
    color: @error;
    .border-radius(3px);
}

.xforms-hint {
    display: block;
    clear: both;
    font-size: smaller;
    margin-top: .2em;
    margin-left: 0;/* used to have margin here but with new colors no margin seems better */
    width: 100%;
    color: #6E6E6E;
}

.xforms-noscript {
    .xforms-help-panel .xforms-help-group { list-style-type: square }
}

/* Navbar */
.fr-language-choice, .fr-noscript-choice, .fr-goto-content {
    color: @navbarLinkColorActive;
    font-size: 85%;
    float: right;
    margin-top: 10px;
    text-align: right;

    a { color: @navbarLinkColor }
}

.navbar-inverse {
    .fr-language-choice, .fr-noscript-choice, .fr-goto-content {
        color: @navbarInverseLinkColorActive;
        a { color: @navbarInverseLinkColor }
    }
}

.fr-goto-content { border: 2px solid #888888; padding: .5em; float: left; margin-left: 1em }

/* Make button appear the same color as a link */
.xforms-trigger-appearance-xxforms-minimal button, .xforms-trigger-appearance-xxforms-minimal input {
    color: #6E6E6E;
}

/* But force minimal buttons color within heading */
h1 .xforms-trigger-appearance-xxforms-minimal, h2 .xforms-trigger-appearance-xxforms-minimal, h3 .xforms-trigger-appearance-xxforms-minimal,
h1 .xforms-trigger-appearance-xxforms-minimal button, h2 .xforms-trigger-appearance-xxforms-minimal button, h3 .xforms-trigger-appearance-xxforms-minimal button,
h1 .xforms-trigger-appearance-xxforms-minimal input, h2 .xforms-trigger-appearance-xxforms-minimal input, h3 .xforms-trigger-appearance-xxforms-minimal input {
    color: #004B92;
}

/* Add a star before the label of required fields, but only in new/edit modes */
/* NOTE: This only works in span layout (the default in FR since 2011-07-28) */
/* NOTE: Also cover Form Builder classes here instead of form-builder.css, so we don't miss changes done here */
.fr-mode-new .xforms-required .xforms-label, .fr-mode-edit .xforms-required .xforms-label, .fr-mode-test .xforms-required .xforms-label,
        .fr-mode-new .fb-required-true .xforms-label, .fr-mode-edit .fb-required-true .xforms-label {
    background-image: url(asterisk.png);
    background-position: 0 2px;             /* Lower the star, so it doesn't sit "too high" relative to the text of the label */
    background-repeat: no-repeat;
    padding-left: 12px;
}

/* Colored border for invalid fields */
/* NOTE: We don't use this style for required fields, as we are now using an asterisk next to the label */
.xforms-invalid-visited .xforms-input-input, textarea.xforms-invalid-visited { border-color: @error }

/* Upload control information */
.xforms-upload-info { background-color: transparent }

/* Table of contents */
.fr-toc a { text-decoration: none }

/* Error summary */
.fr-view .xbl-fr-error-summary {
    .fr-error-title {
        font-size: smaller;
        font-weight: bold;
        background-color: @error;
        color: white;
        .border-radius(4px);
    }

    .fr-error-label, .fr-error-row { font-weight: bold }
    .fr-error-alert { color: @error } // override default of XBL component

    // Mix-in a border into the error summary body
    .fr-error-summary-body {
        .fr-border;
    }
}

/* Section */
.xbl-fr-section {

    background-color: white;
    overflow: hidden;                   // Force section box to be around inner boxes, even if they have a margin, so the background covers the whole area

    .fr-section-title {
        a {
            text-decoration: none;
            color: inherit;             // Don't use the default styling for anchors
                                        // For positioning of the .fb-section-label-editor-click-interceptor, positioned relative to the anchor:
            display: block;             // - So it extends all the way to the right
            height: 100%;               // - So it take the whole height, even when the section title is empty
        }
        .fr-section-open-close { border-bottom: white }
        .xforms-label { font-weight: normal }
        .fr-section-arrow { float: left; display: block; height: 1.5em; background-color: white }
        .xforms-trigger-appearance-xxforms-minimal button,
            .xforms-trigger-appearance-xxforms-minimal input { text-decoration: none }

        .fr-section-opened, .fr-section-closed {
            padding-left: 20px;
            background-repeat: no-repeat;
            background-position: 5px 50%;
            cursor: pointer;                                        // So the "hand" cursor shows wherever the mouse is on the line, not just on the text of the title
        }

        .fr-section-opened {
            background-image: url(arrow-down.png);
        }
        .fr-section-closed {
            background-image: url(arrow-right.png);
        }
    }
}

/* Add background to static read-only fields and special output fields */
.xforms-static, .fr-static { min-height: 1em }
.fr-mode-view {
    .fr-grid-content { margin-bottom: 1em }
    .fr-repeat .fr-grid-content {
        background-color: transparent;
        margin-bottom: 0;
    }
}

.table th { text-align: center }

/* ***** Print and PDF ********************************************************************************************** */

/* This is also used for PDF generation */
@media print {
    html, html body { background-color: white; background-image: none }
    html { font-family: "Arial Unicode MS" }
    .fr-separator { background-color: black; height: 2px }
    h1, h2, h3 { color: black }
    a, .xforms-trigger-appearance-xxforms-minimal { color: black; text-decoration: none }
    .fr-top .fr-form-title, .fr-toc { color: black }
    .fr-section-container div.fr-collapsible { color: black }
    .fr-container { border: none }
    .fr-top, .fr-bottom { background: none }
    .xforms-required label { background-image: none; padding-left: 0 }
}
