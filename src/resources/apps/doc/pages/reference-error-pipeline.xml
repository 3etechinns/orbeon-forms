<!--
    Copyright (C) 2004-2007 Orbeon, Inc.

    The Orbeon documentation is not distributed under the LGPL license. Use of the documentation is
    subject to the following terms:

    * Conversion to other formats is allowed, but the actual content may not be altered or edited
      in any way.

    * You may create printed copies for your own personal use.

    * For all other uses, such as selling printed copies or using (parts of) the manual in another
      publication, prior written agreement from Orbeon, Inc. is required.

    Please contact Orbeon at info@orbeon.com for more information.
-->
<document xmlns:p="http://www.orbeon.com/oxf/pipeline" xmlns:xforms="http://www.w3.org/2002/xforms">
    <header>
        <title>Error Handling</title>
    </header>
    <body>
        <section>
            <title>Rationale</title>
            <p>
                
            </p>


            <p>
                When Orbeon Forms encounters an error, it throws two kinds of exceptions: <code>OXFException</code> and
                its subclass, <code>ValidationException</code>. They both contain a nested root cause, and
                <code>ValidationException</code> contains document location information.
            </p>
            <p>
                When an exception is thrown, Orbeon Forms displays a default error page containing the root cause and
                location information if available, as well as a detailed Orbeon Forms stack trace. However, the
                application developer can display a different page by specifying a processor to be executed upon error.
                This processor could be, for example, a pipeline logging the error and displaying a nice error page to
                the user.
            </p>
        </section>
        <section>
            <title>Configuration</title>
            <p>
                The error processor is configured in <code>web.xml</code>. For more information, please refer to the <a
                href="integration-packaging#error-configuration">Packaging and Deployment</a> documentation.
            </p>
        </section>
        <section>
            <title>Example</title>
            <section>
                <title>Setup</title>
                <p>
                    The following code in <code>web.xml</code> specifies that upon error, the Pipeline processor must
                    run using the <code>oxf:/config/error.xpl</code> pipeline:
                </p>
                <xml-source>
                    <servlet>
                        <servlet-name>oxf</servlet-name>
                        <servlet-class>org.orbeon.oxf.servlet.OPSServlet</servlet-class>
                        <comment>The error processor that OPSServlet must execute</comment>
                        <init-param>
                            <param-name>oxf.error-processor.name</param-name>
                            <param-value>{http://www.orbeon.com/oxf/processors}pipeline</param-value>
                        </init-param>
                        <comment>The pipeline to execute</comment>
                        <init-param>
                            <param-name>oxf.error-processor.input.config</param-name>
                            <param-value>oxf:/config/error.xpl</param-value>
                        </init-param>
                    </servlet>
                </xml-source>
            </section>
            <section>
                <title>error.xpl</title>
                <p>
                    In most cases, the custom error processor logs or displays the exception that occurred. A simple
                    error pipeline is shown below, using the <a
                    href="processors-generators#exception-generator">Exception generator</a> to display the root cause
                    message, but not the exception stack trace.
                </p>
            </section>
        </section>
    </body>
</document>
