var XFORMS_DELAY_BEFORE_INCREMENTAL_REQUEST_IN_MS=500;var XFORMS_DELAY_BEFORE_FORCE_INCREMENTAL_REQUEST_IN_MS=2000;var XFORMS_DELAY_BEFORE_DISPLAY_LOADING_IN_MS=500;var XFORMS_DEBUG_WINDOW_HEIGHT=600;var XFORMS_DEBUG_WINDOW_WIDTH=300;var XFORMS_SEPARATOR_1="\xb7";var XFORMS_SEPARATOR_2="-";var XXFORMS_NAMESPACE_URI="http://orbeon.org/oxf/xml/xforms";var BASE_URL=null;var XFORMS_SERVER_URL=null;var PATH_TO_JAVASCRIPT="/ops/javascript/xforms.js";var XFORMS_IS_GECKO=navigator.userAgent.toLowerCase().indexOf("gecko")!=-1;var ELEMENT_TYPE=document.createElement("dummy").nodeType;var ATTRIBUTE_TYPE=document.createAttribute("dummy").nodeType;var TEXT_TYPE=document.createTextNode("").nodeType;var XFORMS_REGEXP_CR=new RegExp("\\r","g");var XFORMS_REGEXP_SINGLE_QUOTE=new RegExp("'","g");var XFORMS_REGEXP_OPEN_ANGLE=new RegExp("<","g");var XFORMS_REGEXP_AMPERSAND=new RegExp("&","g");var XFORMS_WIDE_TEXTAREA_MIN_ROWS=5;ORBEON={};ORBEON.util={};ORBEON.xforms={};ORBEON.xforms.Globals={isRenderingEnginePresto:navigator.userAgent.toLowerCase().indexOf("opera")!=-1,isRenderingEngineWebCore:navigator.userAgent.toLowerCase().indexOf("safari")!=-1,isRenderingEngineWebCore13:navigator.userAgent.indexOf("AppleWebKit/312")!=-1,isRenderingEngineTridend:navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&navigator.userAgent.toLowerCase().indexOf("opera")==-1,eventQueue:[],eventsFirstEventTime:0,requestForm:null,requestInProgress:false,lastRequestIsError:false,executeEventFunctionQueued:0,maskFocusEvents:false,previousDOMFocusOut:null,htmlAreaNames:[],repeatTreeChildToParent:[],repeatIndexes:[],repeatTreeParentToAllChildren:{},overlayManager:null,inputCalendarCreated:{},inputCalendarOnclick:{},tooltipLibraryInitialized:false,changedIdsRequest:{},serverValue:{},autoCompleteLastKeyCode:{},autoCompleteOpen:{},loadingOtherPage:false,activeControl:null,autosizeTextareas:[],fckEditorLoading:false,fckEditorsToLoad:[],debugDiv:null,debugLastTime:new Date().getTime(),pageLoadedRegistered:false,formLoadingLoading:[],formLoadingError:[],formLoadingNone:[],formStaticState:[],formDynamicState:[],formClientState:[]};ORBEON.util.IEDom={hasClass:function(_1,_2){if(_1.className==_2){return true;}else{var _3=_1.className+XFORMS_SEPARATOR_1;if(_3.indexOf(_2+" ")==0){return true;}if(_3.indexOf(" "+_2+" ")!=-1){return true;}if(_3.indexOf(" "+_2+XFORMS_SEPARATOR_1)!=-1){return true;}return false;}},addClass:function(_4,_5){if(!this.hasClass(_4,_5)){_4.className=_4.className.length==0?_5:(_4.className+" "+_5);}},removeClass:function(_6,_7){if(this.hasClass(_6,_7)){var _8=_6.className.split(" ");var _9="";for(var i=0;i<_8.length;i++){if(_8[i]!=_7){if(_9.length>0){_9+=" ";}_9+=_8[i];}}_6.className=_9;}}};ORBEON.util.String={replace:function(_b,_c,_d){return _b.replace(new RegExp(_c,"g"),_d);}};ORBEON.util.MozDom={_regenerateClassName:function(_e){var _f="";for(var _10 in _e.orbeonClasses){if(_e.orbeonClasses[_10]){if(_f.length>0){_f+=" ";}_f+=_10;}}_e.className=_f;},hasClass:function(_11,_12){if(!_11.orbeonClasses){_11.orbeonClasses={};var _13=_11.className.split(" ");for(var i=0;i<_13.length;i++){_11.orbeonClasses[_13[i]]=true;}}return _11.orbeonClasses[_12]==true;},addClass:function(_15,_16){if(!this.hasClass(_15,_16)){_15.orbeonClasses[_16]=true;this._regenerateClassName(_15);}},removeClass:function(_17,_18){if(this.hasClass(_17,_18)){_17.orbeonClasses[_18]=false;this._regenerateClassName(_17);}}};ORBEON.util.Dom={ELEMENT_TYPE:1,isElement:function(_19){return _19.nodeType==this.ELEMENT_TYPE;},getStringValue:function(_1a){var _1b="";for(var i=0;i<_1a.childNodes.length;i++){var _1d=_1a.childNodes[i];if(_1d.nodeType==TEXT_TYPE){_1b+=_1d.nodeValue;}}return _1b;},setStringValue:function(_1e,_1f){while(_1e.childNodes.length>0){_1e.removeChild(_1e.firstChild);}var _20=_1e.ownerDocument.createTextNode(_1f);_1e.appendChild(_20);},getAttribute:function(_21,_22){if(ORBEON.xforms.Globals.isRenderingEngineTridend){return _21.getAttribute(_22);}else{if(_21.hasAttribute(_22)){if(ORBEON.xforms.Globals.isRenderingEngineWebCore){return ORBEON.util.String.replace(_21.getAttribute(_22),"&#38;","&");}else{return _21.getAttribute(_22);}}else{return null;}}},getChildElement:function(_23,_24){for(var i=0;i<_23.childNodes.length;i++){var _26=_23.childNodes[i];if(ORBEON.util.Dom.isElement(_26)){if(_24==0){return _26;}_24--;}}return null;},getFormIndex:function(_27){for(var _28=0;_28<document.forms.length;_28++){var _29=document.forms[_28];if(_27==_29){return _28;}}return null;}};(function(){var _2a=ORBEON.xforms.Globals.isRenderingEngineTridend?ORBEON.util.IEDom:ORBEON.util.MozDom;for(var _2b in _2a){ORBEON.util.Dom[_2b]=_2a[_2b];}}());ORBEON.xforms.Document={dispatchEvent:function(_2c,_2d,_2e,_2f,_30,_31){if(_2e==undefined){for(var _32=0;_32<document.forms.length;_32++){var _33=document.forms[_32];if(ORBEON.util.Dom.hasClass(_33,"xforms-form")){_2e=_33;break;}}}var _34=new ORBEON.xforms.Server.Event(_2e,_2c,null,null,_2d,_2f,_30);ORBEON.xforms.Server.fireEvents([_34],_31==undefined?false:_31);},getValue:function(_35){var _36=document.getElementById(_35);return ORBEON.xforms.Controls.getCurrentValue(_36);},setValue:function(_37,_38){var _39=document.getElementById(_37);xformsFireEvents(new Array(xformsCreateEventArray(_39,"xxforms-value-change-with-focus-change",String(_38),null)),false);}};ORBEON.xforms.Controls={isRelevant:function(_3a){return !ORBEON.util.Dom.hasClass(_3a,"xforms-disabled");},isReadonly:function(_3b){return ORBEON.util.Dom.hasClass(_3b,"xforms-readonly");},isRequired:function(_3c){return ORBEON.util.Dom.hasClass(_3c,"xforms-required");},isValid:function(_3d){return !ORBEON.util.Dom.hasClass(_3d,"xforms-invalid");},getForm:function(_3e){if(typeof _3e.form=="undefined"){var _3f=_3e;while(_3f.tagName.toLowerCase()!="form"){_3f=_3f.parentNode;}return _3f;}else{return _3e.form;}},getCurrentValue:function(_40){if(ORBEON.util.Dom.hasClass(_40,"xforms-input")){return ORBEON.util.Dom.getChildElement(_40,1).value;}if(ORBEON.util.Dom.hasClass(_40,"xforms-select1-open")){return ORBEON.util.Dom.getChildElement(_40,0).value;}else{if(ORBEON.util.Dom.hasClass(_40,"xforms-select-appearance-full")||ORBEON.util.Dom.hasClass(_40,"xforms-select1-appearance-full")){var _41=_40.getElementsByTagName("input");var _42="";for(var _43=0;_43<_41.length;_43++){var _44=_41[_43];if(_44.checked){if(_42!=""){_42+=" ";}_42+=_44.value;}}return _42;}else{if(ORBEON.util.Dom.hasClass(_40,"xforms-select-appearance-compact")||ORBEON.util.Dom.hasClass(_40,"xforms-select1-appearance-minimal")||ORBEON.util.Dom.hasClass(_40,"xforms-select1-appearance-compact")){var _45=_40.options;var _46="";for(var _47=0;_47<_45.length;_47++){var _48=_45[_47];if(_48.selected){if(_46!=""){_46+=" ";}_46+=_48.value;}}return _46;}else{return _40.value;}}}},_getControlLabel:function(_49,_4a){var _4b=_49;while(true){if(_4b==null){break;}if(ORBEON.util.Dom.isElement(_4b)&&ORBEON.util.Dom.hasClass(_4b,_4a)){break;}_4b=_4a=="xforms-label"?_4b.previousSibling:_4b.nextSibling;}return _4b;},_setMessage:function(_4c,_4d,_4e){var _4f=ORBEON.xforms.Controls._getControlLabel(_4c,_4d);if(_4f!=null){if(_4e==""){ORBEON.util.Dom.addClass(_4f,"xforms-disabled");}else{ORBEON.util.Dom.removeClass(_4f,"xforms-disabled");ORBEON.util.Dom.setStringValue(_4f,_4e);}}},setLabelMessage:function(_50,_51){if(ORBEON.util.Dom.hasClass(_50,"xforms-trigger")||ORBEON.util.Dom.hasClass(_50,"xforms-submit")){if(_50.tagName.toLowerCase()=="input"){_50.title=_51;}else{ORBEON.util.Dom.setStringValue(_50,_51);}}else{ORBEON.xforms.Controls._setMessage(_50,"xforms-label",_51);}},getHelpMessage:function(_52){var _53=ORBEON.xforms.Controls._getControlLabel(_52,"xforms-help");return _53==null?"":ORBEON.util.Dom.getStringValue(_53);},setHelpMessage:function(_54,_55){ORBEON.xforms.Controls._setMessage(_54,"xforms-help",_55);},setValid:function(_56,_57){if(_57){ORBEON.util.Dom.removeClass(_56,"xforms-invalid");}else{ORBEON.util.Dom.addClass(_56,"xforms-invalid");}var _58=ORBEON.xforms.Controls._getControlLabel(_56,"xforms-alert");if(_58!=null){if(_57){ORBEON.util.Dom.removeClass(_58,"xforms-alert-active");ORBEON.util.Dom.addClass(_58,"xforms-alert-inactive");}else{ORBEON.util.Dom.removeClass(_58,"xforms-alert-inactive");ORBEON.util.Dom.addClass(_58,"xforms-alert-active");}}},setRelevant:function(_59,_5a){var _5b=[_59,ORBEON.xforms.Controls._getControlLabel(_59,"xforms-label"),ORBEON.xforms.Controls._getControlLabel(_59,"xforms-hint"),ORBEON.xforms.Controls._getControlLabel(_59,"xforms-alert")];if(_5a&&ORBEON.xforms.Controls.getHelpMessage(_59)!=""){_5b.push(ORBEON.xforms.Controls._getControlLabel(_59,"xforms-help"));_5b.push(ORBEON.xforms.Controls._getControlLabel(_59,"xforms-help-image"));}for(var _5c=0;_5c<_5b.length;_5c++){var _5d=_5b[_5c];if(_5d!=null){if(_5a){ORBEON.util.Dom.removeClass(_5d,"xforms-disabled");}else{ORBEON.util.Dom.addClass(_5d,"xforms-disabled");}}}},getAlertMessage:function(_5e){var _5f=ORBEON.xforms.Controls._getControlLabel(_5e,"xforms-alert");return ORBEON.util.Dom.getStringValue(_5f);},setAlertMessage:function(_60,_61){ORBEON.xforms.Controls._setMessage(_60,"xforms-alert",_61);},setHintMessage:function(_62,_63){if(ORBEON.util.Dom.hasClass(_62,"xforms-trigger")||ORBEON.util.Dom.hasClass(_62,"xforms-trigger")){_62.title=_63;}else{ORBEON.xforms.Controls._setMessage(_62,"xforms-hint",_63);}},setFocus:function(_64){var _65=document.getElementById(_64);if(ORBEON.util.Dom.hasClass(_65,"xforms-input")){ORBEON.util.Dom.getChildElement(_65,1).focus();}else{if(ORBEON.util.Dom.hasClass(_65,"xforms-select-appearance-full")){ORBEON.util.Dom.getChildElement(ORBEON.util.Dom.getChildElement(_65,0),0).focus();}else{if(typeof _65.focus!="undefined"){_65.focus();}}}},updateRequiredEmpty:function(_66){if(ORBEON.util.Dom.hasClass(_66,"xforms-required")){if(ORBEON.xforms.Controls.getCurrentValue(_66)==""){ORBEON.util.Dom.addClass(_66,"xforms-required-empty");ORBEON.util.Dom.removeClass(_66,"xforms-required-filled");}else{ORBEON.util.Dom.addClass(_66,"xforms-required-filled");ORBEON.util.Dom.removeClass(_66,"xforms-required-empty");}}else{ORBEON.util.Dom.removeClass(_66,"xforms-required-filled");ORBEON.util.Dom.removeClass(_66,"xforms-required-empty");}},hintActive:function(_67,_68){var _69=ORBEON.xforms.Events._findHint(_67);if(_69!=null){if(_68){if(ORBEON.xforms.Globals.activeControl!=null){ORBEON.xforms.Controls.hintActive(ORBEON.xforms.Globals.activeControl,false);}ORBEON.xforms.Globals.activeControl=_67;ORBEON.util.Dom.removeClass(_69,"xforms-hint");ORBEON.util.Dom.addClass(_69,"xforms-hint-active");}else{ORBEON.xforms.Globals.activeControl=null;ORBEON.util.Dom.addClass(_69,"xforms-hint");ORBEON.util.Dom.removeClass(_69,"xforms-hint-active");}}},autosizeTextarea:function(_6a){var _6b=_6a.scrollHeight;var _6c=_6a.clientHeight;var _6d=_6c/_6a.rows;var _6e=0;if(_6b>_6c){while(_6b>_6c){_6a.rows=_6a.rows+1;_6c=_6a.clientHeight;_6e++;}}else{if(_6b<_6c){while(_6a.rows>XFORMS_WIDE_TEXTAREA_MIN_ROWS&&_6b<_6c-_6d){_6a.rows=_6a.rows-1;_6c=_6a.clientHeight;_6e--;}}}},updateHTMLAreaClasses:function(_6f){var _70=_6f.previousSibling;while(_70.nodeType!=ORBEON.util.Dom.ELEMENT_TYPE){_70=_6f.previousSibling;}_70.className=_6f.className;}};ORBEON.xforms.Events={_findHint:function(_71){var _72=_71;while(true){_72=_72.nextSibling;if(_72==null){return null;}if(ORBEON.util.Dom.isElement(_72)&&(ORBEON.util.Dom.hasClass(_72,"xforms-hint")||ORBEON.util.Dom.hasClass(_72,"xforms-hint-active"))&&_72.htmlFor==_71.id){return _72;}}},_findParentXFormsControl:function(_73){while(true){if(!_73){return null;}if(_73.xformsElement){return _73.xformsElement;}else{if(_73.ownerDocument&&_73.ownerDocument.xformsElement){return _73.ownerDocument.xformsElement;}else{if(_73.className!=null){if(ORBEON.util.Dom.hasClass(_73,"xforms-control")||ORBEON.util.Dom.hasClass(_73,"xforms-help-image")||ORBEON.util.Dom.hasClass(_73,"xforms-alert")){return _73;}}}}_73=_73.parentNode;}},_keyCodeModifiesField:function(c){return c!=9&&c!=13&&c!=16&&c!=17&&c!=18;},focus:function(_75){if(!ORBEON.xforms.Globals.maskFocusEvents){var _76=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_75));if(_76!=null){ORBEON.xforms.Controls.hintActive(_76,true);if(typeof ORBEON.xforms.Globals.serverValue[_76.id]=="undefined"){ORBEON.xforms.Globals.serverValue[_76.id]=_76.value;}if(ORBEON.xforms.Globals.previousDOMFocusOut){if(ORBEON.xforms.Globals.previousDOMFocusOut!=_76){var _77=new Array();_77.push(xformsCreateEventArray(ORBEON.xforms.Globals.previousDOMFocusOut,"DOMFocusOut",null));_77.push(xformsCreateEventArray(_76,"DOMFocusIn",null));xformsFireEvents(_77,true);}ORBEON.xforms.Globals.previousDOMFocusOut=null;}else{if(document.xformsPreviousDOMFocusIn!=_76){xformsFireEvents(new Array(xformsCreateEventArray(_76,"DOMFocusIn",null)),true);}}}document.xformsPreviousDOMFocusIn=_76;}else{ORBEON.xforms.Globals.maskFocusEvents=false;}},blur:function(_78){if(!ORBEON.xforms.Globals.maskFocusEvents){var _79=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_78));if(_79!=null){ORBEON.xforms.Controls.hintActive(_79,false);ORBEON.xforms.Globals.previousDOMFocusOut=_79;if(ORBEON.util.Dom.hasClass(_79,"xforms-textarea")&&ORBEON.util.Dom.hasClass(_79,"xforms-mediatype-text-html")){var _7a=FCKeditorAPI.GetInstance(_79.name);_79.value=_7a.GetXHTML();xformsValueChanged(_79,null);}}}},change:function(_7b){var _7c=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_7b));if(_7c!=null&&!ORBEON.util.Dom.hasClass(_7c,"xforms-upload")){if(ORBEON.xforms.Globals.changedIdsRequest[_7c.id]!=null){ORBEON.xforms.Globals.changedIdsRequest[_7c.id]=0;}if(ORBEON.util.Dom.hasClass(_7c,"xforms-select1-appearance-compact")){if(_7c.value==""){_7c.options[0].selected=true;}else{var _7d=false;for(var _7e=0;_7e<_7c.options.length;_7e++){var _7f=_7c.options[_7e];if(_7f.selected){if(_7d){_7f.selected=false;}else{_7d=true;}}}}}xformsFireEvents([xformsCreateEventArray(_7c,"xxforms-value-change-with-focus-change",ORBEON.xforms.Controls.getCurrentValue(_7c))],false);}},keydown:function(_80){var _81=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_80));if(_81!=null){if(ORBEON.xforms.Events._keyCodeModifiesField(_80.keyCode)){ORBEON.xforms.Globals.changedIdsRequest[_81.id]=ORBEON.xforms.Globals.changedIdsRequest[_81.id]==null?1:ORBEON.xforms.Globals.changedIdsRequest[_81.id]+1;}}},keypress:function(_82){var _83=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_82));if(_83!=null){if(ORBEON.util.Dom.hasClass(_83,"xforms-select1-open")||ORBEON.util.Dom.hasClass(_83,"xforms-input")){if(_82.keyCode==10||_82.keyCode==13){YAHOO.util.Event.preventDefault(_82);var _84=[xformsCreateEventArray(_83,"xxforms-value-change-with-focus-change",ORBEON.xforms.Controls.getCurrentValue(_83)),xformsCreateEventArray(_83,"DOMActivate",null)];xformsFireEvents(_84,false);}}}},keyup:function(_85){var _86=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_85));if(_86!=null){if(ORBEON.util.Dom.hasClass(_86,"xforms-select1-open")){ORBEON.xforms.Globals.autoCompleteLastKeyCode[_86.id]=_85.keyCode;}if(ORBEON.xforms.Events._keyCodeModifiesField(_85.keyCode)){ORBEON.xforms.Globals.changedIdsRequest[_86.id]--;}if(ORBEON.util.Dom.hasClass(_86,"xforms-incremental")){xformsFireEvents([xformsCreateEventArray(_86,"xxforms-value-change-with-focus-change",ORBEON.xforms.Controls.getCurrentValue(_86))],true);}ORBEON.xforms.Controls.updateRequiredEmpty(_86);if(ORBEON.util.Dom.hasClass(_86,"xforms-textarea-appearance-xxforms-autosize")){ORBEON.xforms.Controls.autosizeTextarea(_86);}}},mousedown:function(_87){if(ORBEON.xforms.Globals.overlayManager!=null){ORBEON.xforms.Globals.overlayManager.hideAll();}},resize:function(_88){for(var i=0;i<ORBEON.xforms.Globals.autosizeTextareas.length;i++){var _8a=ORBEON.xforms.Globals.autosizeTextareas[i];ORBEON.xforms.Controls.autosizeTextarea(_8a);}},_showToolTip:function(_8b,_8c,_8d,_8e){if(!ORBEON.xforms.Globals.tooltipLibraryInitialized){ORBEON.xforms.Globals.tooltipLibraryInitialized=true;tt_init();}var _8f;var _90=_8c.htmlFor+"-"+_8d;var _91=document.getElementById(_90);if(_91!=null){if(_91.message==_8e){_8f=false;}else{_8f=true;_91.parentNode.removeChild(_91);}}else{_8f=true;}if(_8f){var _92=tt_Htm(this,_90,_8e);var _93=document.createElement("DIV");_93.innerHTML=_92;var _94=_93.firstChild;_94.message=_8e;document.body.appendChild(_94);}tt_Show(_8b,_90,false,0,false,false,ttOffsetX,ttOffsetY,false,false,ttTemp);},mouseover:function(_95){var _96=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_95));if(_96!=null){if(ORBEON.util.Dom.hasClass(_96,"xforms-help-image")){var _97=_96.nextSibling;while(!ORBEON.util.Dom.isElement(_97)){_97=_96.nextSibling;}var _98=document.getElementById(_97.htmlFor);ORBEON.xforms.Events._showToolTip(_95,_97,"xforms-help",ORBEON.xforms.Controls.getHelpMessage(_98));}else{if(ORBEON.util.Dom.hasClass(_96,"xforms-alert-active")){var _99=document.getElementById(_96.htmlFor);var _9a=ORBEON.xforms.Controls.getAlertMessage(_99);if(_9a!=""){ORBEON.xforms.Events._showToolTip(_95,_96,"xforms-alert",ORBEON.xforms.Controls.getAlertMessage(_99));}}}}},mouseout:function(_9b){var _9c=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_9b));if(_9c!=null){if(ORBEON.util.Dom.hasClass(_9c,"xforms-help-image")||ORBEON.util.Dom.hasClass(_9c,"xforms-alert-active")){tt_Hide();}}},click:function(_9d){var _9e=ORBEON.xforms.Events._findParentXFormsControl(YAHOO.util.Event.getTarget(_9d));if(_9e!=null){ORBEON.xforms.Controls.hintActive(_9e,true);if(ORBEON.util.Dom.hasClass(_9e,"xforms-output")){xformsFireEvents([xformsCreateEventArray(_9e,"DOMFocusIn",null)],false);}if((ORBEON.util.Dom.hasClass(_9e,"xforms-trigger")||ORBEON.util.Dom.hasClass(_9e,"xforms-submit"))){YAHOO.util.Event.preventDefault(_9d);if(!ORBEON.util.Dom.hasClass(_9e,"xforms-readonly")){ORBEON.xforms.Events.focus(_9d);xformsFireEvents([xformsCreateEventArray(_9e,"DOMActivate",null)],false);}}if(ORBEON.util.Dom.hasClass(_9e,"xforms-select1-appearance-full")||ORBEON.util.Dom.hasClass(_9e,"xforms-select-appearance-full")){xformsFireEvents(new Array(xformsCreateEventArray(_9e,"xxforms-value-change-with-focus-change",ORBEON.xforms.Controls.getCurrentValue(_9e),null)),false);}if(ORBEON.util.Dom.hasClass(_9e,"xforms-input")){var _9f=ORBEON.util.Dom.getChildElement(_9e,0);var _a0=ORBEON.util.Dom.getChildElement(_9e,1);var _a1=ORBEON.util.Dom.getChildElement(_9e,2);if(ORBEON.util.Dom.hasClass(_a0,"xforms-type-date")&&!ORBEON.util.Dom.hasClass(_9f,"xforms-readonly")){if(!ORBEON.xforms.Globals.inputCalendarCreated[_9e.id]){Calendar.setup({inputField:_a0.id,ifFormat:"%Y-%m-%d",showsTime:false,button:_9e.id,singleClick:true,step:1,onUpdate:ORBEON.xforms.Events.calendarUpdate,electric:true});ORBEON.xforms.Globals.inputCalendarOnclick[_9e.id]=_9e.onclick;_9e.onclick=null;ORBEON.xforms.Globals.inputCalendarCreated[_9e.id]=true;}ORBEON.xforms.Globals.inputCalendarOnclick[_9e.id]();}}}},calendarUpdate:function(_a2){if(ORBEON.util.Dom.hasClass(_a2.activeDiv,"day")){var _a3=_a2.params.inputField;var _a4=_a3.parentNode;xformsFireEvents([xformsCreateEventArray(_a4,"xxforms-value-change-with-focus-change",ORBEON.xforms.Controls.getCurrentValue(_a4))],false);}},sliderValueChange:function(_a5){var _a6=document.getElementById(this.id);_a6.value=_a5/200;xformsValueChanged(_a6,null);},menuClick:function(_a7,_a8,_a9){var _aa=_a9["menu"];var _ab=_a9["value"];ORBEON.xforms.Globals.overlayManager.hideAll();xformsFireEvents([xformsCreateEventArray(_aa,"xxforms-value-change-with-focus-change",_ab)],false);}};ORBEON.xforms.Init={_specialControlsInitFunctions:null,_getSpecialControlsInitFunctions:function(){ORBEON.xforms.Init._specialControlsInitFunctions=ORBEON.xforms.Init._specialControlsInitFunctions||{"select1":{"compact":ORBEON.xforms.Init._list,"{http://orbeon.org/oxf/xml/xforms}autocomplete":ORBEON.xforms.Init._autoComplete,"{http://orbeon.org/oxf/xml/xforms}menu":ORBEON.xforms.Init._menu,"{http://orbeon.org/oxf/xml/xforms}tree":ORBEON.xforms.Init._tree},"select":{"compact":ORBEON.xforms.Init._list,"{http://orbeon.org/oxf/xml/xforms}tree":ORBEON.xforms.Init._tree},"range":{"":ORBEON.xforms.Init._range},"textarea":{"{http://orbeon.org/oxf/xml/xforms}autosize":ORBEON.xforms.Init._widetextArea,"text/html":ORBEON.xforms.Init._htmlArea}};return ORBEON.xforms.Init._specialControlsInitFunctions;},_addToTree:function(_ac,_ad,_ae,_af){for(var _b0=_af;_b0<_ad.length;_b0++){var _b1=_ad[_b0];var _b2=_b1[0];var _b3=_b1[1];var _b4=_b1[2];var _b5={label:_b2,value:_b3};var _b6;if(_ac.xformsAllowMultipleSelection){_b6=new YAHOO.widget.TaskNode(_b5,_ae,false);_b6.onCheckClick=xformsSelectTreeSelect;if(_b4){_b6.check();}}else{_b5.href="javascript:xformsSelect1TreeSelect('"+_ac.id+"', '"+_b3.replace(XFORMS_REGEXP_SINGLE_QUOTE,"\\'")+"')";_b6=new YAHOO.widget.TextNode(_b5,_ae,false);}ORBEON.xforms.Init._addToTree(_ac,_b1,_b6,3);if(_b4){if(_ac.value!=""){_ac.value+=" ";}_ac.value+=_b3;}}},_addToMenuItem:function(_b7,_b8,_b9){if(_b9.element.id==""){YAHOO.util.Dom.generateId(_b9.element);}_b9.clickEvent.subscribe(ORBEON.xforms.Events.menuClick,{"menu":_b7,"value":_b8[1]});if(_b8.length>3){_b9.mouseOverEvent.subscribe(xformsOnMenuBarItemMouseOver);_b9.mouseOutEvent.subscribe(xformsOnMenuBarItemMouseOut);var _ba=new YAHOO.widget.Menu(_b9.element.id+"menu");for(var _bb=3;_bb<_b8.length;_bb++){var _bc=_b8[_bb];var _bd=_bc[0];var _be=_bc[1];var _bf=_bc[2];var _c0=new YAHOO.widget.MenuItem(_bd,{url:"#"});_ba.addItem(_c0);ORBEON.xforms.Init._addToMenuItem(_b7,_bc,_c0);}_b9.cfg.setProperty("submenu",_ba);ORBEON.xforms.Globals.overlayManager.register(_ba);}},_registerListerersOnFormElements:function(){for(var i=0;i<document.forms.length;i++){var _c2=document.forms[i];if(ORBEON.util.Dom.hasClass(_c2,"xforms-form")){for(var j=0;j<_c2.elements.length;j++){var _c4=_c2.elements[j];YAHOO.util.Event.addListener(_c4,"focus",ORBEON.xforms.Events.focus);YAHOO.util.Event.addListener(_c4,"blur",ORBEON.xforms.Events.blur);YAHOO.util.Event.addListener(_c4,"change",ORBEON.xforms.Events.change);}}}},document:function(){if(window.addEventListener&&!ORBEON.xforms.Globals.isRenderingEngineWebCore13){window.addEventListener("focus",ORBEON.xforms.Events.focus,true);window.addEventListener("blur",ORBEON.xforms.Events.blur,true);window.addEventListener("change",ORBEON.xforms.Events.change,true);}else{ORBEON.xforms.Init._registerListerersOnFormElements();}YAHOO.util.Event.addListener(document,"keypress",ORBEON.xforms.Events.keypress);YAHOO.util.Event.addListener(document,"keydown",ORBEON.xforms.Events.keydown);YAHOO.util.Event.addListener(document,"keyup",ORBEON.xforms.Events.keyup);YAHOO.util.Event.addListener(document,"mousedown",ORBEON.xforms.Events.mousedown);YAHOO.util.Event.addListener(document,"mouseover",ORBEON.xforms.Events.mouseover);YAHOO.util.Event.addListener(document,"mouseout",ORBEON.xforms.Events.mouseout);YAHOO.util.Event.addListener(document,"click",ORBEON.xforms.Events.click);YAHOO.util.Event.addListener(window,"resize",ORBEON.xforms.Events.resize);var _c5=document.getElementsByTagName("script");for(var _c6=0;_c6<_c5.length;_c6++){var _c7=_c5[_c6];var _c8=ORBEON.util.Dom.getAttribute(_c7,"src");if(_c8!=null){var _c9=_c8.indexOf(PATH_TO_JAVASCRIPT);if(_c9!=-1){BASE_URL=ORBEON.util.Dom.getAttribute(_c7,"src").substr(0,_c9);XFORMS_SERVER_URL=BASE_URL+"/xforms-server";break;}}}var _ca=BASE_URL+"/ops/images/yui/";if(YAHOO&&YAHOO.widget){if(YAHOO.widget.Module){YAHOO.widget.Module.IMG_ROOT=_ca;YAHOO.widget.Module.IMG_ROOT_SSL=_ca;}if(YAHOO.widget.Calendar_Core){YAHOO.widget.Calendar_Core.IMG_ROOT=_ca;YAHOO.widget.Calendar_Core.IMG_ROOT_SSL=_ca;}if(YAHOO.widget.MenuModuleItem){YAHOO.widget.MenuModuleItem.prototype.IMG_ROOT=_ca;YAHOO.widget.MenuModuleItem.prototype.IMG_ROOT_SSL=_ca;}}if(!(window.opsXFormsControls===undefined)){var _cb=ORBEON.xforms.Init._getSpecialControlsInitFunctions();for(var _cc in window.opsXFormsControls["controls"]){if(_cb[_cc]){var _cd=window.opsXFormsControls["controls"][_cc];for(var _ce in _cd){var _cf=_cb[_cc][_ce];if(_cf){var _d0=_cd[_ce];for(var _d1=0;_d1<_d0.length;_d1++){var _d2=document.getElementById(_d0[_d1]);_cf(_d2);}}}}}}for(var _d3=0;_d3<document.forms.length;_d3++){var _d4=document.forms[_d3];if(ORBEON.util.Dom.hasClass(_d4,"xforms-form")){ORBEON.xforms.Globals.formLoadingLoading[_d3]=null;ORBEON.xforms.Globals.formLoadingError[_d3]=null;ORBEON.xforms.Globals.formLoadingNone[_d3]=null;var _d5=0;for(var _d6=0;_d6<_d4.childNodes.length;_d6++){if(_d5==3){break;}var _d7=_d4.childNodes[_d6];if(_d7.className=="xforms-loading-loading"){ORBEON.xforms.Globals.formLoadingLoading[_d3]=_d7;_d5++;continue;}if(_d7.className=="xforms-loading-error"){ORBEON.xforms.Globals.formLoadingError[_d3]=_d7;_d5++;continue;}if(_d7.className=="xforms-loading-none"){ORBEON.xforms.Globals.formLoadingNone[_d3]=_d7;_d5++;continue;}}var _d8=_d4.elements;var _d9;var _da;for(var _db=0;_db<_d8.length;_db++){var _dc=_d8[_db];if(_dc.name.indexOf("$static-state")!=-1){ORBEON.xforms.Globals.formStaticState[_d3]=_dc;}else{if(_dc.name.indexOf("$dynamic-state")!=-1){ORBEON.xforms.Globals.formDynamicState[_d3]=_dc;}else{if(_dc.name.indexOf("$client-state")!=-1){ORBEON.xforms.Globals.formClientState[_d3]=_dc;if(_dc.value==""){xformsStoreInClientState(_d3,"ajax-dynamic-state",ORBEON.xforms.Globals.formDynamicState[_d3].value);}}else{if(_dc.name.indexOf("$repeat-tree")!=-1){_d9=_dc;}else{if(_dc.name.indexOf("$repeat-indexes")!=-1){_da=_dc;break;}}}}}}var _dd=_d9.value;var _de=_dd.split(",");for(var _df=0;_df<_de.length;_df++){var _e0=_de[_df].split(" ");var id=_e0[0];var _e2=_e0.length>1?_e0[_e0.length-1]:null;ORBEON.xforms.Globals.repeatTreeChildToParent[id]=_e2;}for(var _e3 in ORBEON.xforms.Globals.repeatTreeChildToParent){var _e4=ORBEON.xforms.Globals.repeatTreeChildToParent[_e3];while(_e4!=null){if(!ORBEON.xforms.Globals.repeatTreeParentToAllChildren[_e4]){ORBEON.xforms.Globals.repeatTreeParentToAllChildren[_e4]=new Array();}ORBEON.xforms.Globals.repeatTreeParentToAllChildren[_e4].push(_e3);_e4=ORBEON.xforms.Globals.repeatTreeChildToParent[_e4];}}var _e5=_da.value;var _e6=_e5.split(",");for(var _e7=0;_e7<_e6.length;_e7++){var _e8=_e6[_e7].split(" ");var id=_e8[0];var _ea=_e8[_e8.length-1];ORBEON.xforms.Globals.repeatIndexes[id]=_ea;}if(xformsGetFromClientState(_d3,"load-did-run")==null){xformsStoreInClientState(_d3,"load-did-run","true");}else{xformsFireEvents(new Array(xformsCreateEventArray(_d4,"xxforms-all-events-required",null,null)),false);}}}if(typeof xformsPageLoadedServer!="undefined"){xformsPageLoadedServer();}},_autoComplete:function(_eb){var _ec=ORBEON.util.Dom.getChildElement(_eb,0);var _ed=ORBEON.util.Dom.getChildElement(_eb,1);var _ee=new Array();for(var _ef=1;_ef<_ed.options.length;_ef++){_ee.push(_ed.options[_ef].value);}var _f0=ORBEON.util.Dom.hasClass(_eb,"xforms-select1-open-autocomplete-nofilter");ORBEON.xforms.Globals.autoCompleteLastKeyCode[_eb.id]=-1;ORBEON.xforms.Globals.autoCompleteOpen[_eb.id]=actb(_ec,_ee,_f0);},_widetextArea:function(_f1){ORBEON.xforms.Globals.autosizeTextareas.push(_f1);ORBEON.xforms.Controls.autosizeTextarea(_f1);},_range:function(_f2){_f2.tabIndex=0;_f2.previousValue=0;var _f3=_f2.firstChild;if(_f3.nodeType!=ELEMENT_TYPE){_f3=_f3.nextSibling;}_f3.id=_f2.id+XFORMS_SEPARATOR_1+"thumb";var _f4=YAHOO.widget.Slider.getHorizSlider(_f2.id,_f3.id,0,200);_f4.onChange=ORBEON.xforms.Events.sliderValueChange;},_tree:function(_f5){_f5.xformsAllowMultipleSelection=ORBEON.util.Dom.hasClass(_f5,"xforms-select");var _f6=ORBEON.util.Dom.getStringValue(_f5);_f6=ORBEON.util.String.replace(_f6,"\n"," ");_f6=ORBEON.util.String.replace(_f6,"\r"," ");var _f7=eval(_f6);ORBEON.util.Dom.setStringValue(_f5,"");_f5.value="";_f5.xformsTree=new YAHOO.widget.TreeView(_f5.id);var _f8=_f5.xformsTree.getRoot();ORBEON.xforms.Init._addToTree(_f5,_f7,_f8,0);var _f9=_f5.xformsAllowMultipleSelection?_f5.value.split(" "):[_f5.value];for(nodeIndex in _f5.xformsTree._nodes){var _fa=_f5.xformsTree._nodes[nodeIndex];if(xformsArrayContains(_f9,_fa.data.value)){var _fb=_fa.parent;while(_fb!=null){_fb.expand();_fb=_fb.parent;}}}_f5.previousValue=_f5.value;_f5.xformsTree.draw();ORBEON.util.Dom.removeClass(_f5,"xforms-initially-hidden");},_menu:function(_fc){var _fd;var _fe;for(var j=0;j<_fc.childNodes.length;j++){var _100=_fc.childNodes[j];if(_100.nodeType==ELEMENT_TYPE){if(ORBEON.util.Dom.hasClass(_100,"yuimenubar")){_fd=_100;}else{if(ORBEON.util.Dom.hasClass(_100,"xforms-initially-hidden")){_fe=_100;}}}}if(ORBEON.xforms.Globals.overlayManager==null){ORBEON.xforms.Globals.overlayManager=new YAHOO.widget.OverlayManager();}var _101=ORBEON.util.Dom.getStringValue(_fe);_101=ORBEON.util.String.replace(_101,"\n"," ");_101=ORBEON.util.String.replace(_101,"\r"," ");var _102=eval(_101);ORBEON.util.Dom.setStringValue(_fe,"");YAHOO.util.Dom.generateId(_fd);_fc.xformsMenu=new YAHOO.widget.MenuBar(_fd.id);for(var _103=0;_103<_fc.xformsMenu.getItemGroups()[0].length;_103++){var _104=_102[_103];var _105=_fc.xformsMenu.getItem(_103);ORBEON.xforms.Init._addToMenuItem(_fc,_104,_105);}_fc.xformsMenu.render();_fc.xformsMenu.show();ORBEON.util.Dom.removeClass(_fc,"xforms-initially-hidden");},_htmlArea:function(_106){var _107=new FCKeditor(_106.name);if(!xformsArrayContains(ORBEON.xforms.Globals.htmlAreaNames,_106.name)){ORBEON.xforms.Globals.htmlAreaNames.push(_106.name);}_107.BasePath=BASE_URL+"/ops/fckeditor/";_107.ToolbarSet="OPS";if(ORBEON.xforms.Globals.fckEditorLoading){ORBEON.xforms.Globals.fckEditorsToLoad.push(_107);}else{ORBEON.xforms.Globals.fckEditorLoading=true;_107.ReplaceTextarea();ORBEON.xforms.Controls.updateHTMLAreaClasses(document.getElementById(_107.InstanceName));}},_list:function(list){var _109="";for(var i=0;i<list.options.length;i++){var _10b=list.options[i];if(_10b.selected){if(_109!=""){_109+=" ";}_109+=_10b.value;}}ORBEON.xforms.Globals.serverValue[list.id]=_109;}};ORBEON.xforms.Server={Event:function(form,_10d,_10e,_10f,_110,_111,_112){this.form=form;this.targetId=_10d;this.otherId=_10e;this.value=_10f;this.eventName=_110;this.bubbles=_111;this.cancelable=_112;},fireEvents:function(_113,_114){var _115=new Date().getTime();if(ORBEON.xforms.Globals.eventQueue.length==0){ORBEON.xforms.Globals.eventsFirstEventTime=_115;}for(var _116=0;_116<_113.length;_116++){ORBEON.xforms.Globals.eventQueue.push(_113[_116]);}ORBEON.xforms.Globals.executeEventFunctionQueued++;if(_114&&!(_115-ORBEON.xforms.Globals.eventsFirstEventTime>XFORMS_DELAY_BEFORE_FORCE_INCREMENTAL_REQUEST_IN_MS)){window.setTimeout(ORBEON.xforms.Server.executeNextRequest,XFORMS_DELAY_BEFORE_INCREMENTAL_REQUEST_IN_MS);}else{ORBEON.xforms.Server.executeNextRequest(true);}return false;},executeNextRequest:function(_117){_117=typeof (_117)=="boolean"&&_117==true;ORBEON.xforms.Globals.executeEventFunctionQueued--;var _118=false;if(!ORBEON.xforms.Globals.requestInProgress&&ORBEON.xforms.Globals.eventQueue.length>0&&(_117||ORBEON.xforms.Globals.executeEventFunctionQueued==0)){var _119={};var _11a=[];for(var _11b=ORBEON.xforms.Globals.eventQueue.length-1;_11b>=0;_11b--){var _11c=ORBEON.xforms.Globals.eventQueue[_11b];if(_11c.eventName=="xxforms-value-change-with-focus-change"){if(!_119[_11c.targetId]==true){_119[_11c.targetId]=true;if(ORBEON.xforms.Globals.serverValue[_11c.targetId]!="undefined"&&ORBEON.xforms.Globals.serverValue[_11c.targetId]!=_11c.value){ORBEON.xforms.Globals.serverValue[_11c.targetId]=_11c.value;_11a.unshift(_11c);}}}else{_11a.unshift(_11c);}}ORBEON.xforms.Globals.eventQueue=_11a;if(ORBEON.xforms.Globals.eventQueue.length>0){ORBEON.xforms.Globals.requestForm=ORBEON.xforms.Controls.getForm(ORBEON.xforms.Globals.eventQueue[0].form);var _11d=ORBEON.util.Dom.getFormIndex(ORBEON.xforms.Globals.requestForm);ORBEON.xforms.Globals.requestInProgress=true;if(XFORMS_DELAY_BEFORE_DISPLAY_LOADING_IN_MS==0){xformsDisplayLoading();}else{window.setTimeout(xformsDisplayLoading,XFORMS_DELAY_BEFORE_DISPLAY_LOADING_IN_MS);}for(var id in ORBEON.xforms.Globals.changedIdsRequest){if(ORBEON.xforms.Globals.changedIdsRequest[id]==0){ORBEON.xforms.Globals.changedIdsRequest[id]=null;}}var _11f="";_11f+="<!DOCTYPE xxforms:event-request [<!ENTITY nbsp \"&#160;\">]>\n";var _120="    ";_11f+="<xxforms:event-request xmlns:xxforms=\"http://orbeon.org/oxf/xml/xforms\">\n";_11f+=_120;_11f+="<xxforms:static-state>";_11f+=ORBEON.xforms.Globals.formStaticState[_11d].value;_11f+="</xxforms:static-state>\n";_11f+=_120;_11f+="<xxforms:dynamic-state>";_11f+=xformsGetFromClientState(_11d,"ajax-dynamic-state");_11f+="</xxforms:dynamic-state>\n";_11f+=_120;_11f+="<xxforms:action>\n";var _121=[];for(var i=0;i<ORBEON.xforms.Globals.eventQueue.length;i++){var _123=ORBEON.xforms.Globals.eventQueue[i];if(ORBEON.xforms.Controls.getForm(_123.form)==ORBEON.xforms.Globals.requestForm){_11f+=_120+_120;_11f+="<xxforms:event";_11f+=" name=\""+_123.eventName+"\"";if(_123.targetId!=null){_11f+=" source-control-id=\""+_123.targetId+"\"";}if(_123.otherId!=null){_11f+=" other-control-id=\""+_123.otherId+"\"";}_11f+=">";if(_123.value!=null){if(typeof _123.value=="string"){_123.value=_123.value.replace(XFORMS_REGEXP_AMPERSAND,"&amp;");_123.value=_123.value.replace(XFORMS_REGEXP_OPEN_ANGLE,"&lt;");}_11f+=_123.value;}_11f+="</xxforms:event>\n";_121.unshift(i);}}_11f+=_120;_11f+="</xxforms:action>\n";_11f+="</xxforms:event-request>";for(var i=0;i<_121.length;i++){ORBEON.xforms.Globals.eventQueue.splice(_121[i],1);}_118=true;YAHOO.util.Connect.setDefaultPostHeader(false);YAHOO.util.Connect.initHeader("Content-Type","application/xml");YAHOO.util.Connect.asyncRequest("POST",XFORMS_SERVER_URL,{success:xformsHandleResponse},_11f);}}if(!_118&&ORBEON.xforms.Globals.eventQueue.length==0&&!ORBEON.xforms.Globals.lastRequestIsError){xformsDisplayIndicator("none");}},callUserScript:function(_125,_126,_127){var _128=document.getElementById(_126);var _129=document.getElementById(_127);var _12a={"target":_128};var _12b=eval(_125);_12b.call(_129,_12a);}};function xformsIsDefined(_12c){return typeof _12c!="undefined";}function xformsDispatchEvent(_12d,_12e){if(_12d.dispatchEvent){var _12f=document.createEvent("HTMLEvents");_12f.initEvent(_12e.toLowerCase(),true,true);_12d.dispatchEvent(_12f);}else{_12d.fireEvent("on"+_12e);}}function xformsPreventDefault(_130){if(_130.preventDefault){_130.preventDefault();}else{return false;}}function xformsArrayContains(_131,_132){for(var i=0;i<_131.length;i++){if(_131[i]==_132){return true;}}return false;}function xformsStringReplaceWorker(node,_135,_136){switch(node.nodeType){case ELEMENT_TYPE:for(var i=0;i<node.attributes.length;i++){var _138=new String(node.attributes[i].value).replace(_135,_136);if(_138!=node.attributes[i].value){node.setAttribute(node.attributes[i].name,_138);}}for(var i=0;i<node.childNodes.length;i++){xformsStringReplaceWorker(node.childNodes[i],_135,_136);}break;case TEXT_TYPE:var _13a=new String(node.nodeValue).replace(_135,_136);if(_13a!=node.nodeValue){node.nodeValue=_13a;}break;}}function xformsStringReplace(node,_13c,_13d){var _13e=new RegExp(_13c.replace(new RegExp("\\$","g"),"\\$"),"g");xformsStringReplaceWorker(node,_13e,_13d);}function xformsNormalizeEndlines(text){return text.replace(XFORMS_REGEXP_CR,"");}function xformsAppendRepeatSuffix(id,_141){if(_141==""){return id;}if(_141.charAt(0)==XFORMS_SEPARATOR_2){_141=_141.substring(1);}if(id.indexOf(XFORMS_SEPARATOR_1)==-1){return id+XFORMS_SEPARATOR_1+_141;}else{return id+XFORMS_SEPARATOR_2+_141;}}function xformsFindRepeatDelimiter(_142,_143){var _144="";var _145=_142;while(true){var _146=ORBEON.xforms.Globals.repeatTreeChildToParent[_145];if(_146==null){break;}var _147=ORBEON.xforms.Globals.repeatTreeChildToParent[_146];_144=(_147==null?XFORMS_SEPARATOR_1:XFORMS_SEPARATOR_2)+ORBEON.xforms.Globals.repeatIndexes[_146]+_144;_145=_146;}var _148="repeat-begin-"+_142+_144;var _149=document.getElementById(_148);if(!_149){return null;}var _14a=_149;var _14b=0;while(true){while(_14a.nodeType!=ELEMENT_TYPE||!ORBEON.util.Dom.hasClass(_14a,"xforms-repeat-delimiter")){_14a=_14a.nextSibling;if(!_14a){return null;}}_14b++;if(_14b==_143){break;}_14a=_14a.nextSibling;}return _14a;}function xformsLog(text){var _14d=document.getElementById("xforms-debug");if(_14d==null){var _14e;var _14f;if(navigator.appName.indexOf("Microsoft")!=-1){_14e=document.body.offsetWidth;_14f=document.body.offsetHeight;}else{_14e=window.innerWidth;_14f=window.innerHeight;}_14d=document.createElement("div");_14d.className="xforms-debug";_14d.id="xforms-debug";_14d.style.width=XFORMS_DEBUG_WINDOW_WIDTH+"px";_14d.style.left=_14e-(XFORMS_DEBUG_WINDOW_WIDTH+50)+"px";_14d.style.height=XFORMS_DEBUG_WINDOW_HEIGHT+"px";_14d.style.top=_14f-(XFORMS_DEBUG_WINDOW_HEIGHT+20)+"px";var _150=document.createElement("BUTTON");_150.appendChild(document.createTextNode("Clear"));_14d.appendChild(_150);document.body.insertBefore(_14d,document.body.firstChild);YAHOO.util.Event.addListener(_150,"click",function(_151){var _152=getEventTarget(_151);alert("click");while(_152.nextSibling){_152.parentNode.removeChild(_152.nextSibling);}return false;});YAHOO.util.Event.addListener(_14d,"mousedown",function(_153){ORBEON.xforms.Globals.debugDiv=getEventTarget(_153);return false;});YAHOO.util.Event.addListener(document,"mouseup",function(_154){ORBEON.xforms.Globals.debugDiv=null;return false;});YAHOO.util.Event.addListener(document,"mousemove",function(_155){if(ORBEON.xforms.Globals.debugDiv){ORBEON.xforms.Globals.debugDiv.style.left=_155.clientX;ORBEON.xforms.Globals.debugDiv.style.top=_155.clientY;}return false;});}_14d.innerHTML+=text+" | ";}function xformsLogTime(text){return;var _157=ORBEON.xforms.Globals.debugLastTime;var _158=new Date().getTime();ORBEON.xforms.Globals.debugLastTime=_158;xformsLog((_158-_157)+": "+text);}function xformsLogProperties(_159){var _15a="[";var _15b=true;for(var p in _159){if(_15b){_15b=false;}else{_15a+=", ";}_15a+=p+": "+_159[p];}_15a+="]";xformsLog(_15a);}function xformsDisplayIndicator(_15d){var form=ORBEON.xforms.Globals.requestForm;var _15f=ORBEON.util.Dom.getFormIndex(form);switch(_15d){case "loading":if(ORBEON.xforms.Globals.formLoadingLoading[_15f]!=null){ORBEON.xforms.Globals.formLoadingLoading[_15f].style.display="block";}if(ORBEON.xforms.Globals.formLoadingError[_15f]!=null){ORBEON.xforms.Globals.formLoadingError[_15f].style.display="none";}if(ORBEON.xforms.Globals.formLoadingNone[_15f]!=null){ORBEON.xforms.Globals.formLoadingNone[_15f].style.display="block";}break;case "error":if(ORBEON.xforms.Globals.formLoadingLoading[_15f]!=null){ORBEON.xforms.Globals.formLoadingLoading[_15f].style.display="none";}if(ORBEON.xforms.Globals.formLoadingError[_15f]!=null){ORBEON.xforms.Globals.formLoadingError[_15f].style.display="block";}if(ORBEON.xforms.Globals.formLoadingNone[_15f]!=null){ORBEON.xforms.Globals.formLoadingNone[_15f].style.display="none";}break;case "none":if(!ORBEON.xforms.Globals.loadingOtherPage){if(ORBEON.xforms.Globals.formLoadingLoading[_15f]!=null){ORBEON.xforms.Globals.formLoadingLoading[_15f].style.display="none";}if(ORBEON.xforms.Globals.formLoadingError[_15f]!=null){ORBEON.xforms.Globals.formLoadingError[_15f].style.display="none";}if(ORBEON.xforms.Globals.formLoadingNone[_15f]!=null){ORBEON.xforms.Globals.formLoadingNone[_15f].style.display="block";}}break;}}function xformsGetFromClientState(_160,key){var _162=ORBEON.xforms.Globals.formClientState[_160];var _163=_162.value.split("&");for(var i=0;i<_163.length;i=i+2){if(_163[i]==key){return unescape(_163[i+1]);}}return null;}function xformsStoreInClientState(_165,key,_167){var _168=ORBEON.xforms.Globals.formClientState[_165];var _169=_168.value==""?new Array():_168.value.split("&");var _16a=false;for(var i=0;i<_169.length;i=i+2){if(_169[i]==key){_169[i+1]=escape(_167);_16a=true;break;}}if(!_16a){_169.push(key);_169.push(escape(_167));}_168.value=_169.join("&");}function xformsValueChanged(_16c,_16d){var _16e=_16c.value!=_16c.previousValue;var _16f=ORBEON.util.Dom.hasClass(_16c,"xforms-upload");if(_16e&&!_16f){_16c.previousValue=_16c.value;var _170=new Array(xformsCreateEventArray(_16c,"xxforms-value-change-with-focus-change",_16c.value,_16d));var _171=_16d==null&&ORBEON.util.Dom.hasClass(_16c,"xforms-incremental");xformsFireEvents(_170,_171);}return _16e;}function xformsHandleClick(_172){var _173=getEventTarget(_172);if((ORBEON.util.Dom.hasClass(_173,"xforms-trigger")||ORBEON.util.Dom.hasClass(_173,"xforms-trigger"))&&!ORBEON.util.Dom.hasClass(_173,"xforms-readonly")){xformsFireEvents(new Array(xformsCreateEventArray(_173,"DOMActivate",null)),false);}return false;}function xformsHandleAutoCompleteMouseChange(_174){_174.parentNode.lastKeyCode=-1;_174.parentNode.value=_174.value;xformsValueChanged(_174.parentNode,null);}function xformsFireEvents(_175,_176){var _177=[];for(var _178=0;_178<_175.length;_178++){var _179=_175[_178];var _17a=_179[0];var _17b=_179[1];var _17c=_179[2];var _17d=_179[3];_177.push(new ORBEON.xforms.Server.Event(_17a==undefined?null:ORBEON.xforms.Controls.getForm(_17a),_17a==undefined?null:_17a.id,_17d==undefined?null:_17d.id,_17c,_17b,null,null));}ORBEON.xforms.Server.fireEvents(_177,_176);}function xformsCreateEventArray(_17e,_17f,_180,_181){return new Array(_17e,_17f,_180,_181);}function getEventTarget(_182){if(_182&&_182.LinkedField){return _182.LinkedField;}else{_182=_182?_182:window.event;var _183=_182.srcElement?_182.srcElement:_182.target;if(_183.xformsElement){return _183.xformsElement;}else{if(_183.ownerDocument.xformsElement){return _183.ownerDocument.xformsElement;}else{return _183;}}}}function xformsHtmlEditorChange(_184){_184.LinkedField.value=_184.GetXHTML();if(ORBEON.util.Dom.hasClass(_184.LinkedField,"xforms-incremental")){xformsValueChanged(_184.LinkedField,null);}}function xformsSelect1TreeSelect(id,_186){var _187=document.getElementById(id);_187.value=_186;xformsValueChanged(_187);}function xformsSelectTreeSelect(){var tree=this.tree;var _189=document.getElementById(tree.id);_189.value="";for(nodeIndex in tree._nodes){var node=tree._nodes[nodeIndex];if(node.checked){if(_189.value!=""){_189.value+=" ";}_189.value+=node.data.value;}}xformsValueChanged(_189);}function xformsOnMenuBarItemMouseOver(){var _18b=this.parent.activeItem;if(_18b&&_18b!=this){this.parent.clearActiveItem();}this.cfg.setProperty("selected",true);this.focus();var _18c=this.cfg.getProperty("submenu");if(_18c){_18c.show();}}function xformsOnMenuBarItemMouseOut(_18d,_18e){this.cfg.setProperty("selected",false);var _18f=this.cfg.getProperty("submenu");if(_18f){var _190=_18e[0],oRelatedTarget=YAHOO.util.Event.getRelatedTarget(_190);if(!(oRelatedTarget==_18f.element||this._oDom.isAncestor(_18f.element,oRelatedTarget))){_18f.hide();}}}function xformsOnDocumentMouseDown(_191){ORBEON.xforms.Globals.overlayManager.hideAll();}function FCKeditor_OnComplete(_192){_192.EditorDocument.xformsElement=_192.LinkedField;if(ORBEON.util.Dom.hasClass(_192.LinkedField,"xforms-incremental")){_192.Events.AttachEvent("OnSelectionChange",xformsHtmlEditorChange);}YAHOO.util.Event.addListener(_192.EditorDocument,"focus",ORBEON.xforms.Events.focus);YAHOO.util.Event.addListener(_192.EditorDocument,"blur",ORBEON.xforms.Events.blur);YAHOO.util.Event.addListener(_192.EditorDocument,"focusin",ORBEON.xforms.Events.focus);YAHOO.util.Event.addListener(_192.EditorDocument,"focusout",ORBEON.xforms.Events.blur);if(ORBEON.xforms.Globals.fckEditorsToLoad.length>0){var _193=ORBEON.xforms.Globals.fckEditorsToLoad.shift();_193.ReplaceTextarea();ORBEON.xforms.Controls.updateHTMLAreaClasses(document.getElementById(_193.InstanceName));}else{ORBEON.xforms.Globals.fckEditorLoading=false;}}function xformsGetLocalName(_194){if(_194.nodeType==1){return _194.tagName.indexOf(":")==-1?_194.tagName:_194.tagName.substr(_194.tagName.indexOf(":")+1);}else{return null;}}function xformsAddSuffixToIds(_195,_196,_197){var _198=_196;for(var _199=0;_199<_197;_199++){_198+=XFORMS_SEPARATOR_2+"1";}if(_195.id){_195.id=xformsAppendRepeatSuffix(_195.id,_198);}if(_195.htmlFor){_195.htmlFor=xformsAppendRepeatSuffix(_195.htmlFor,_198);}if(_195.name){var _19a=xformsAppendRepeatSuffix(_195.name,_198);if(ORBEON.xforms.Globals.isRenderingEngineTridend){var _19b=document.createElement("<"+_195.tagName+" name='"+_19a+"'>");for(var _19c=0;_19c<_195.attributes.length;_19c++){var _19d=_195.attributes[_19c];if(_19d.nodeName.toLowerCase()!="name"&&_19d.nodeName.toLowerCase()!="height"&&_19d.nodeValue){_19b.setAttribute(_19d.nodeName,_19d.nodeValue);}}YAHOO.util.Event.addListener(_19b,"focus",ORBEON.xforms.Events.focus);YAHOO.util.Event.addListener(_19b,"blur",ORBEON.xforms.Events.blur);YAHOO.util.Event.addListener(_19b,"change",ORBEON.xforms.Events.change);_195.replaceNode(_19b);}else{_195.name=_19a;}}for(var _19e=0;_19e<_195.childNodes.length;_19e++){var _19f=_195.childNodes[_19e];if(_19f.nodeType==ELEMENT_TYPE){if(_19f.id&&_19f.id.indexOf("repeat-end-")==0){_197--;}xformsAddSuffixToIds(_19f,_196,_197);if(_19f.id&&_19f.id.indexOf("repeat-begin-")==0){_197++;}}}}function xformsGetInputUnderNode(node){if(node.nodeType==ELEMENT_TYPE){if(node.tagName.toLowerCase()=="input"){return node;}else{for(var _1a1=0;_1a1<node.childNodes.length;_1a1++){var _1a2=xformsGetInputUnderNode(node.childNodes[_1a1]);if(_1a2!=null){return _1a2;}}}}else{return null;}}function xformsGetClassForRepeatId(_1a3){var _1a4=1;var _1a5=_1a3;while(true){_1a5=ORBEON.xforms.Globals.repeatTreeChildToParent[_1a5];if(_1a5==null){break;}_1a4=_1a4==1?2:1;}return "xforms-repeat-selected-item-"+_1a4;}function xformsHandleResponse(o){var _1a7=o.responseXML;var _1a8=ORBEON.util.Dom.getFormIndex(ORBEON.xforms.Globals.requestForm);if(_1a7&&_1a7.documentElement&&_1a7.documentElement.tagName.indexOf("event-response")!=-1){var _1a9=_1a7.documentElement;var _1aa=null;var _1ab=false;var _1ac=false;for(var i=0;i<_1a9.childNodes.length;i++){if(xformsGetLocalName(_1a9.childNodes[i])=="dynamic-state"){_1aa=ORBEON.util.Dom.getStringValue(_1a9.childNodes[i]);}if(xformsGetLocalName(_1a9.childNodes[i])=="action"){var _1ae=_1a9.childNodes[i];for(var _1af=0;_1af<_1ae.childNodes.length;_1af++){var _1b0=xformsGetLocalName(_1ae.childNodes[_1af]);switch(_1b0){case "control-values":var _1b1=_1ae.childNodes[_1af];for(var j=0;j<_1b1.childNodes.length;j++){var _1b3=xformsGetLocalName(_1b1.childNodes[j]);switch(_1b3){case "copy-repeat-template":var _1b4=_1b1.childNodes[j];var _1b5=ORBEON.util.Dom.getAttribute(_1b4,"id");var _1b6=ORBEON.util.Dom.getAttribute(_1b4,"parent-indexes");var _1b7=ORBEON.util.Dom.getAttribute(_1b4,"id-suffix");var _1b8=new Array();var _1b9=null;var _1ba=document.getElementById("repeat-end-"+_1b5);var _1bb=_1ba.previousSibling;var _1bc=0;while(!(_1bc==0&&_1bb.nodeType==ELEMENT_TYPE&&ORBEON.util.Dom.hasClass(_1bb,"xforms-repeat-delimiter"))){var _1bd=_1bb.cloneNode(true);if(_1bb.nodeType==ELEMENT_TYPE){_1b9=_1bb.tagName;if(ORBEON.util.Dom.hasClass(_1bb,"xforms-repeat-begin-end")&&_1bb.id.indexOf("repeat-begin-")==0){_1bc--;}xformsAddSuffixToIds(_1bd,_1b6==""?_1b7:_1b6+XFORMS_SEPARATOR_2+_1b7,_1bc);if(ORBEON.util.Dom.hasClass(_1bb,"xforms-repeat-begin-end")&&_1bb.id.indexOf("repeat-end-")==0){_1bc++;}var _1be=_1bd.className.split(" ");var _1bf=new Array();for(var _1c0=0;_1c0<_1be.length;_1c0++){var _1c1=_1be[_1c0];if(_1c1!="xforms-repeat-template"){_1bf.push(_1c1);}}_1bd.className=_1bf.join(" ");}_1b8.push(_1bd);_1bb=_1bb.previousSibling;}var _1c2=document.createElement(_1b9);_1c2.className="xforms-repeat-delimiter";_1b8.push(_1c2);_1b8=_1b8.reverse();var _1c3;if(_1b6==""){var _1c4=document.getElementById("repeat-end-"+_1b5);var _1c5=_1c4.previousSibling;while(!(_1c5.nodeType==ELEMENT_TYPE&&ORBEON.util.Dom.hasClass(_1c5,"xforms-repeat-delimiter")&&!ORBEON.util.Dom.hasClass(_1c5,"xforms-repeat-template"))){_1c5=_1c5.previousSibling;}_1c3=_1c5;}else{var _1c6=document.getElementById("repeat-end-"+xformsAppendRepeatSuffix(_1b5,_1b6));_1c3=_1c6;}for(var _1c7 in _1b8){_1bb=_1b8[_1c7];_1c3.parentNode.insertBefore(_1bb,_1c3);}if(ORBEON.xforms.Globals.isRenderingEngineWebCore13){ORBEON.xforms.Init._registerListerersOnFormElements();}break;case "delete-repeat-elements":var _1c8=_1b1.childNodes[j];var _1c9=ORBEON.util.Dom.getAttribute(_1c8,"id");var _1ca=ORBEON.util.Dom.getAttribute(_1c8,"parent-indexes");var _1cb=ORBEON.util.Dom.getAttribute(_1c8,"count");var _1cc=document.getElementById("repeat-end-"+xformsAppendRepeatSuffix(_1c9,_1ca));var _1cd;_1cd=_1cc.previousSibling;if(_1ca==""){while(_1cd.nodeType!=ELEMENT_TYPE||!ORBEON.util.Dom.hasClass(_1cd,"xforms-repeat-delimiter")){_1cd=_1cd.previousSibling;}_1cd=_1cd.previousSibling;}for(var _1ce=0;_1ce<_1cb;_1ce++){while(true){var _1cf=_1cd.nodeType==ELEMENT_TYPE&&ORBEON.util.Dom.hasClass(_1cd,"xforms-repeat-delimiter");var _1d0=_1cd.previousSibling;_1cd.parentNode.removeChild(_1cd);_1cd=_1d0;if(_1cf){break;}}}break;}}}}for(var _1d1=0;_1d1<_1ae.childNodes.length;_1d1++){if(xformsGetLocalName(_1ae.childNodes[_1d1])=="itemsets"){var _1d2=_1ae.childNodes[_1d1];for(var j=0;j<_1d2.childNodes.length;j++){if(xformsGetLocalName(_1d2.childNodes[j])=="itemset"){var _1d4=_1d2.childNodes[j];var _1d5=ORBEON.util.Dom.getAttribute(_1d4,"id");var _1d6=document.getElementById(_1d5);var _1d7=_1d6.className.split(" ");if(ORBEON.util.Dom.hasClass(_1d6,"xforms-select1-open")){var _1d8=new Array();for(var k=0;k<_1d4.childNodes.length;k++){var _1da=_1d4.childNodes[k];if(_1da.nodeType==ELEMENT_TYPE){_1d8.push(ORBEON.util.Dom.getAttribute(_1da,"value"));}}var _1db=ORBEON.util.Dom.getChildElement(_1d6,0);_1db.actb_keywords=_1d8;var _1dc=ORBEON.xforms.Globals.autoCompleteLastKeyCode[_1d6.id];if(_1dc!=-1){ORBEON.xforms.Globals.autoCompleteOpen[_1d6.id](_1dc);}}else{if(_1d6.tagName=="SELECT"){var _1dd=_1d6.options;var _1de=0;var _1df=new Array();for(var k=0;k<_1dd.length;k++){if(_1dd[k].selected){_1df[_1de]=_1dd[k].value;_1de++;}}var _1e1=0;for(var k=0;k<_1d4.childNodes.length;k++){var _1e3=_1d4.childNodes[k];if(_1e3.nodeType==ELEMENT_TYPE){if(_1e1>=_1dd.length){var _1e4=document.createElement("OPTION");_1d6.appendChild(_1e4);_1e4.text=ORBEON.util.Dom.getAttribute(_1e3,"label");_1e4.value=ORBEON.util.Dom.getAttribute(_1e3,"value");_1e4.selected=xformsArrayContains(_1df,_1e4.value);}else{var _1e5=_1dd[_1e1];if(_1e5.text!=ORBEON.util.Dom.getAttribute(_1e3,"label")){_1e5.text=ORBEON.util.Dom.getAttribute(_1e3,"label");}if(_1e5.value!=ORBEON.util.Dom.getAttribute(_1e3,"value")){_1e5.value=ORBEON.util.Dom.getAttribute(_1e3,"value");}_1e5.selected=xformsArrayContains(_1df,_1e5.value);}_1e1++;}}while(_1dd.length>_1e1){if(_1dd.remove){_1dd.remove(_1dd.length-1);}else{var _1e6=_1dd.item(_1dd.length-1);_1e6.parentNode.removeChild(_1e6);}}}else{var _1e7=_1d6.nextSibling;while(_1e7.nodeType!=ELEMENT_TYPE){_1e7=_1e7.nextSibling;}_1e7=_1e7.firstChild;while(_1e7.nodeType!=ELEMENT_TYPE){_1e7=_1e7.nextSibling;}var _1e8=new Array();while(_1d6.childNodes.length>0){var _1e9=xformsGetInputUnderNode(_1d6.firstChild);_1e8[_1e9.value]=_1e9.checked;_1d6.removeChild(_1d6.firstChild);}var _1ea=0;for(var k=0;k<_1d4.childNodes.length;k++){var _1ec=_1d4.childNodes[k];if(_1ec.nodeType==ELEMENT_TYPE){var _1ed=_1e7.cloneNode(true);xformsStringReplace(_1ed,"$xforms-template-label$",ORBEON.util.Dom.getAttribute(_1ec,"label"));xformsStringReplace(_1ed,"$xforms-template-value$",ORBEON.util.Dom.getAttribute(_1ec,"value"));xformsStringReplace(_1ed,"$xforms-item-index$",_1ea);_1d6.appendChild(_1ed);if(_1e8[ORBEON.util.Dom.getAttribute(_1ec,"value")]==true){xformsGetInputUnderNode(_1ed).checked=true;}_1ea++;}}}}}}}}for(var _1ee=0;_1ee<_1ae.childNodes.length;_1ee++){var _1ef=xformsGetLocalName(_1ae.childNodes[_1ee]);switch(_1ef){case "control-values":var _1f0=_1ae.childNodes[_1ee];for(var j=0;j<_1f0.childNodes.length;j++){var _1f2=xformsGetLocalName(_1f0.childNodes[j]);switch(_1f2){case "control":var _1f3=_1f0.childNodes[j];var _1f4=ORBEON.util.Dom.getStringValue(_1f3);var _1f5=ORBEON.util.Dom.getAttribute(_1f3,"id");var _1f6=ORBEON.util.Dom.getAttribute(_1f3,"relevant");var _1f7=ORBEON.util.Dom.getAttribute(_1f3,"readonly");var _1f8=ORBEON.util.Dom.getAttribute(_1f3,"required");var _1f9=ORBEON.util.Dom.getAttribute(_1f3,"display-value");var type=ORBEON.util.Dom.getAttribute(_1f3,"type");var _1fb=document.getElementById(_1f5);var _1fc=_1fb.className.split(" ");ORBEON.xforms.Globals.serverValue[_1f5]=_1f4;var _1fd=ORBEON.util.Dom.hasClass(_1fb,"xforms-static");if(ORBEON.util.Dom.hasClass(_1fb,"xforms-output")||_1fd){var _1fe=_1f9!=null?_1f9:_1f4;if(ORBEON.util.Dom.hasClass(_1fb,"xforms-mediatype-image")){var _1ff=ORBEON.util.Dom.getChildElement(_1fb,0);_1ff.src=_1fe;}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-mediatype-text-html")){_1fb.innerHTML=_1fe;}else{ORBEON.util.Dom.setStringValue(_1fb,_1fe);}}}else{if(ORBEON.xforms.Globals.changedIdsRequest[_1f5]!=null){}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-trigger")||ORBEON.util.Dom.hasClass(_1fb,"xforms-submit")){}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-select1-open")){if(_1fb.value!=_1f4){_1fb.value=_1f4;ORBEON.util.Dom.getChildElement(_1fb,0).value=_1f4;_1fb.previousValue=_1f4;}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-full")||ORBEON.util.Dom.hasClass(_1fb,"xforms-select1-appearance-full")){var _200=ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-full")?_1f4.split(" "):new Array(_1f4);var _201=_1fb.getElementsByTagName("input");for(var _202=0;_202<_201.length;_202++){var _203=_201[_202];_203.checked=xformsArrayContains(_200,_203.value);}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-compact")||ORBEON.util.Dom.hasClass(_1fb,"xforms-select1-appearance-compact")||ORBEON.util.Dom.hasClass(_1fb,"xforms-select1-appearance-minimal")){var _204=ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-compact")?_1f4.split(" "):new Array(_1f4);var _205=_1fb.options;for(var _206=0;_206<_205.length;_206++){var _207=_205[_206];_207.selected=xformsArrayContains(_204,_207.value);}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-input")){var _208=ORBEON.util.Dom.getChildElement(_1fb,0);var _209=ORBEON.util.Dom.getChildElement(_1fb,1);var _20a=ORBEON.util.Dom.getChildElement(_1fb,2);if(type=="{http://www.w3.org/2001/XMLSchema}date"){for(var _20b=0;_20b<_1fb.childNodes.length;_20b++){var _20c=_1fb.childNodes[_20b];ORBEON.util.Dom.addClass(_20c,"xforms-type-date");ORBEON.util.Dom.removeClass(_20c,"xforms-type-string");}}else{if(type!=null&&type!="{http://www.w3.org/2001/XMLSchema}date"){for(var _20d=0;_20d<_1fb.childNodes.length;_20d++){var _20e=_1fb.childNodes[_20d];ORBEON.util.Dom.addClass(_20e,"xforms-type-string");ORBEON.util.Dom.removeClass(_20e,"xforms-type-date");}}}if(ORBEON.util.Dom.hasClass(_209,"xforms-type-date")){ORBEON.util.Dom.setStringValue(_208,_1f9==null?"":_1f9);}if(_1fb.value!=_1f4){_1fb.previousValue=_1f4;_1fb.valueSetByXForms++;_1fb.value=_1f4;}if(_209.value!=_1f4){_209.value=_1f4;}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-textarea")&&ORBEON.util.Dom.hasClass(_1fb,"xforms-mediatype-text-html")){var _20f=FCKeditorAPI.GetInstance(_1fb.name);if(xformsNormalizeEndlines(_20f.GetXHTML())!=xformsNormalizeEndlines(_1f4)){_20f.SetHTML(_1f4);_1fb.value=_1f4;_1fb.previousValue=_1f4;}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-xxforms-tree")){var _210=_1f4.split(" ");for(nodeIndex in _1fb.xformsTree._nodes){var node=_1fb.xformsTree._nodes[nodeIndex];if(node.children.length==0){var _212=xformsArrayContains(_210,node.data.value);if(_212){node.check();}else{node.uncheck();}}}_1fb.value=_1f4;_1fb.previousValue=_1f4;}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-control")&&typeof (_1fb.value)=="string"){if(xformsNormalizeEndlines(_1fb.value)!=xformsNormalizeEndlines(_1f4)){_1fb.value=_1f4;_1fb.previousValue=_1f4;if(ORBEON.util.Dom.hasClass(_1fb,"xforms-textarea-appearance-xxforms-autosize")){ORBEON.xforms.Controls.autosizeTextarea(_1fb);}}}}}}}}}}}}var _213=ORBEON.util.Dom.getAttribute(_1f3,"label");if(_213!=null){ORBEON.xforms.Controls.setLabelMessage(_1fb,_213);}var _214=ORBEON.util.Dom.getAttribute(_1f3,"hint");if(_214!=null){ORBEON.xforms.Controls.setHintMessage(_1fb,_214);}var _215=ORBEON.util.Dom.getAttribute(_1f3,"help");if(_215!=null){ORBEON.xforms.Controls.setHelpMessage(_1fb,_215);}var _216=ORBEON.util.Dom.getAttribute(_1f3,"alert");if(_216!=null){ORBEON.xforms.Controls.setAlertMessage(_1fb,_216);}var _217=ORBEON.util.Dom.getAttribute(_1f3,"valid");if(_217!=null){var _218=_217!="false";ORBEON.xforms.Controls.setValid(_1fb,_218);}if(_1f6!=null){var _219=_1f6=="true";ORBEON.xforms.Controls.setRelevant(_1fb,_219);if(ORBEON.util.Dom.hasClass(_1fb,"xforms-textarea-appearance-xxforms-autosize")){ORBEON.xforms.Controls.autosizeTextarea(_1fb);}}if(_1f8!=null){var _21a=_1f8=="true";if(_21a){ORBEON.util.Dom.addClass(_1fb,"xforms-required");}else{ORBEON.util.Dom.removeClass(_1fb,"xforms-required");}}if(!_1fd){ORBEON.xforms.Controls.updateRequiredEmpty(_1fb);}if(_1f7!=null&&!_1fd){function setReadonlyOnFormElement(_21b,_21c){if(_21c){_21b.setAttribute("disabled","disabled");ORBEON.util.Dom.addClass(_21b,"xforms-readonly");}else{_21b.removeAttribute("disabled");ORBEON.util.Dom.removeClass(_21b,"xforms-readonly");}}var _21d=_1f7=="true";if(ORBEON.util.Dom.hasClass(_1fb,"xforms-input")){var _21e=_1fb.firstChild;while(_21e.nodeType!=ELEMENT_TYPE){_21e=_21e.nextSibling;}if(_21d){ORBEON.util.Dom.addClass(_21e,"xforms-readonly");}else{ORBEON.util.Dom.removeClass(_21e,"xforms-readonly");}var _21f=_21e.nextSibling;while(_21f.nodeType!=ELEMENT_TYPE){_21f=_21f.nextSibling;}if(_21d){_21f.setAttribute("disabled","disabled");}else{_21f.removeAttribute("disabled");}var _220=_21f.nextSibling;while(_220.nodeType!=ELEMENT_TYPE){_220=_220.nextSibling;}if(_21d){ORBEON.util.Dom.addClass(_220,"xforms-showcalendar-readonly");}else{ORBEON.util.Dom.removeClass(_220,"xforms-showcalendar-readonly");}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-output")||ORBEON.util.Dom.hasClass(_1fb,"xforms-group")){if(_21d){ORBEON.util.Dom.addClass(_1fb,"xforms-readonly");}else{ORBEON.util.Dom.removeClass(_1fb,"xforms-readonly");}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-select1-appearance-full")||ORBEON.util.Dom.hasClass(_1fb,"xforms-select-appearance-full")){for(var _221=0;_221<_1fb.childNodes.length;_221++){var span=_1fb.childNodes[_221];var _223=span.firstChild;setReadonlyOnFormElement(_223,_21d);}}else{if(ORBEON.util.Dom.hasClass(_1fb,"xforms-textarea")&&ORBEON.util.Dom.hasClass(_1fb,"xforms-mediatype-text-html")){var _224=FCKeditorAPI.GetInstance(_1fb.name);if(_21d){_224.ToolbarSet.Collapse();}else{_224.ToolbarSet.Expand();}}else{setReadonlyOnFormElement(_1fb,_21d);}}}}}if(ORBEON.util.Dom.hasClass(_1fb,"xforms-textarea")&&ORBEON.util.Dom.hasClass(_1fb,"xforms-mediatype-text-html")){ORBEON.xforms.Controls.updateHTMLAreaClasses(_1fb);}break;case "repeat-iteration":var _225=_1f0.childNodes[j];var _226=ORBEON.util.Dom.getAttribute(_225,"id");var _227=ORBEON.util.Dom.getAttribute(_225,"iteration");var _228=ORBEON.util.Dom.getAttribute(_225,"relevant");var _229=xformsFindRepeatDelimiter(_226,_227).nextSibling;while(!(_229.nodeType==ELEMENT_TYPE&&(ORBEON.util.Dom.hasClass(_229,"xforms-repeat-delimiter")||ORBEON.util.Dom.hasClass(_229,"xforms-repeat-begin-end")))){if(_229.nodeType==ELEMENT_TYPE){if(_228){if(_228=="true"){ORBEON.util.Dom.removeClass(_229,"xforms-disabled");}else{ORBEON.util.Dom.addClass(_229,"xforms-disabled");}}}_229=_229.nextSibling;}break;}}break;case "divs":var _22a=_1ae.childNodes[_1ee];for(var j=0;j<_22a.childNodes.length;j++){if(xformsGetLocalName(_22a.childNodes[j])=="div"){var _22c=_22a.childNodes[j];var _22d=ORBEON.util.Dom.getAttribute(_22c,"id");var _22e=ORBEON.util.Dom.getAttribute(_22c,"visibility")=="visible";var _22f="xforms-case-begin-"+_22d;var _230=document.getElementById(_22f);var _231=_230.parentNode;var _232=false;for(var _233=0;_231.childNodes.length;_233++){var _234=_231.childNodes[_233];if(!_232){if(_234.id==_230.id){_232=true;}else{continue;}}if(_234.nodeType==ELEMENT_TYPE){if(_234.id=="xforms-case-end-"+_22d){break;}ORBEON.util.Dom.addClass(_234,_22e?"xforms-case-selected":"xforms-case-deselected");ORBEON.util.Dom.removeClass(_234,_22e?"xforms-case-deselected":"xforms-case-selected");}}}}if(XFORMS_IS_GECKO&&ORBEON.xforms.Globals.htmlAreaNames.length>0){for(var _235=0;_235<ORBEON.xforms.Globals.htmlAreaNames.length;_235++){var name=ORBEON.xforms.Globals.htmlAreaNames[_235];var _237=FCKeditorAPI.GetInstance(name);try{_237.EditorDocument.designMode="on";}catch(e){}}}break;case "repeat-indexes":var _238=_1ae.childNodes[_1ee];var _239=new Array();for(var j=0;j<_238.childNodes.length;j++){if(xformsGetLocalName(_238.childNodes[j])=="repeat-index"){var _23b=_238.childNodes[j];var _23c=ORBEON.util.Dom.getAttribute(_23b,"id");var _23d=ORBEON.util.Dom.getAttribute(_23b,"new-index");_239[_23c]=_23d;}}for(var _23e in _239){var _23f=ORBEON.xforms.Globals.repeatTreeParentToAllChildren[_23e];for(var _240 in _23f){var _241=_23f[_240];if(!_239[_241]){_239[_241]=ORBEON.xforms.Globals.repeatIndexes[_241];}}}for(var _242 in _239){var _243=ORBEON.xforms.Globals.repeatIndexes[_242];if(_243!=0){var _244=xformsFindRepeatDelimiter(_242,_243);if(_244!=null){var _245=_244.nextSibling;while(_245.nodeType!=ELEMENT_TYPE||(!ORBEON.util.Dom.hasClass(_245,"xforms-repeat-delimiter")&&!ORBEON.util.Dom.hasClass(_245,"xforms-repeat-begin-end"))){if(_245.nodeType==ELEMENT_TYPE){ORBEON.util.Dom.removeClass(_245,xformsGetClassForRepeatId(_242));}_245=_245.nextSibling;}}}}for(var _246 in _239){var _247=_239[_246];ORBEON.xforms.Globals.repeatIndexes[_246]=_247;}for(var _248 in _239){var _249=_239[_248];if(_249!=0){var _24a=xformsFindRepeatDelimiter(_248,_249);var _24b=_24a.nextSibling;while(_24b.nodeType!=ELEMENT_TYPE||(!ORBEON.util.Dom.hasClass(_24b,"xforms-repeat-delimiter")&&!ORBEON.util.Dom.hasClass(_24b,"xforms-repeat-begin-end"))){if(_24b.nodeType==ELEMENT_TYPE){ORBEON.util.Dom.addClass(_24b,xformsGetClassForRepeatId(_248));}_24b=_24b.nextSibling;}}}break;case "submission":var _24c=_1ae.childNodes[_1ee];var _24d=ORBEON.util.Dom.getAttribute(_24c,"show-progress");if(_24d!="false"){_1ac=true;}_1ab=true;ORBEON.xforms.Globals.formDynamicState[_1a8].value=_1aa;ORBEON.xforms.Globals.requestForm.submit();break;case "message":var _24e=_1ae.childNodes[_1ee];var _24f=ORBEON.util.Dom.getStringValue(_24e);if(ORBEON.util.Dom.getAttribute(_24e,"level")=="modal"){alert(_24f);}break;case "load":var _250=_1ae.childNodes[_1ee];var _251=ORBEON.util.Dom.getAttribute(_250,"resource");var show=ORBEON.util.Dom.getAttribute(_250,"show");var _253=ORBEON.util.Dom.getAttribute(_250,"target");var _254=ORBEON.util.Dom.getAttribute(_250,"show-progress");if(show=="replace"){if(_253==null){if(_254!="false"){_1ac=true;}window.location.href=_251;}else{window.open(_251,_253);}}else{window.open(_251,"_blank");}break;case "setfocus":var _255=_1ae.childNodes[_1ee];var _256=ORBEON.util.Dom.getAttribute(_255,"control-id");var _257=document.getElementById(_256);if(ORBEON.util.Dom.hasClass(_257,"xforms-input")){_257=ORBEON.util.Dom.getChildElement(_257,1);}ORBEON.xforms.Globals.maskFocusEvents=true;_257.focus();break;case "script":var _258=_1ae.childNodes[_1ee];var _259=ORBEON.util.Dom.getAttribute(_258,"name");var _25a=ORBEON.util.Dom.getAttribute(_258,"target-id");var _25b=ORBEON.util.Dom.getAttribute(_258,"observer-id");ORBEON.xforms.Server.callUserScript(_259,_25a,_25b);break;}}}}if(!_1ab){xformsStoreInClientState(_1a8,"ajax-dynamic-state",_1aa);}if(_1ac){xformsDisplayIndicator("loading");ORBEON.xforms.Globals.loadingOtherPage=true;}ORBEON.xforms.Globals.lastRequestIsError=false;}else{if(_1a7&&_1a7.documentElement&&_1a7.documentElement.tagName.indexOf("exceptions")!=-1){var _25c="XForms error";var _25d=_1a7.getElementsByTagName("message");for(var _25e=_25d.length-1;_25e>=0;_25e--){if(_25d[_25e].firstChild!=null){_25c+=": "+ORBEON.util.Dom.getStringValue(_25d[_25e]);break;}}var _25f=ORBEON.xforms.Globals.formLoadingError[_1a8];ORBEON.util.Dom.setStringValue(_25f,_25c);ORBEON.xforms.Globals.lastRequestIsError=true;xformsDisplayIndicator("error");}else{var _260=ORBEON.xforms.Globals.formLoadingError[_1a8];_260.innerHTML="Unexpected response received from server";ORBEON.xforms.Globals.lastRequestIsError=true;xformsDisplayIndicator("error");}}ORBEON.xforms.Globals.changedIdsRequest={};ORBEON.xforms.Globals.requestInProgress=false;ORBEON.xforms.Globals.executeEventFunctionQueued++;ORBEON.xforms.Server.executeNextRequest(false);}function xformsDisplayLoading(){if(ORBEON.xforms.Globals.requestInProgress==true){xformsDisplayIndicator("loading");}}if(!ORBEON.xforms.Globals.pageLoadedRegistered){ORBEON.xforms.Globals.pageLoadedRegistered=true;YAHOO.util.Event.addListener(window,"load",ORBEON.xforms.Init.document);}ORBEON.xforms.Globals.debugLastTime=new Date().getTime();