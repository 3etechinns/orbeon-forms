<!--
    Copyright (C) 2005 Orbeon, Inc.

    This program is free software; you can redistribute it and/or modify it under the terms of the
    GNU Lesser General Public License as published by the Free Software Foundation; either version
    2.1 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU Lesser General Public License for more details.

    The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
-->
<xhtml:html xmlns:xforms="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:widget="http://orbeon.org/oxf/xml/widget"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xhtml:head>
        <xhtml:title>Dynamic Images With XForms</xhtml:title>
        <xforms:model>
            <xforms:instance>
                <candidates current="1">
                    <candidate>
                        <name>George W. Bush</name>
                        <party>Republican Party</party>
                        <image>bush.jpg</image>
                    </candidate>
                    <candidate>
                        <name>John Kerry</name>
                        <party>Democratic Party</party>
                        <image>kerry.jpg</image>
                    </candidate>
                    <candidate>
                        <name>Ralph Nader</name>
                        <party>Independent</party>
                        <image>nader.jpg</image>
                    </candidate>
                    <candidate>
                        <name>Michael Badnarik</name>
                        <party>Libertarian Party</party>
                        <image>badnarik.jpg</image>
                    </candidate>
                    <candidate>
                        <name>Michael Peroutka</name>
                        <party>Constitution Party</party>
                        <image>peroutka.jpg</image>
                    </candidate>
                    <candidate>
                        <name>David Cobb</name>
                        <party>Green Party</party>
                        <image>cobb.gif</image>
                    </candidate>
                </candidates>
            </xforms:instance>
        </xforms:model>
        <xhtml:style type="text/css">
            .container-outer { text-align: center; display: table; }
            .container-inner { padding-top: 1em; width: 370px; height: 380px; border: 1px solid #99c; }
            .president-name  { display: block; font-weight: bold }
            .president-party { display: block; }
            .president-image { display: block; padding-top: 1em; }
        </xhtml:style>
    </xhtml:head>
    <xhtml:body>
        <xhtml:div class="container-outer">
            <xhtml:div class="container-inner">
                <xforms:group ref="candidate[position() = /candidates/@current]">
                    <xforms:output ref="name" class="president-name"/>
                    <xforms:output ref="party" class="president-party"/>
                    <xforms:output value="concat('/images/2004-candidates/', image)" mediatype="image/*" class="president-image"/>
                </xforms:group>
            </xhtml:div>
            <xforms:trigger appearance="xxforms:link">
                <xforms:label>Change president</xforms:label>
                <xforms:setvalue ev:event="DOMActivate" ref="@current" value=". mod count(/candidates/candidate) + 1"/>
            </xforms:trigger>
        </xhtml:div>
    </xhtml:body>
</xhtml:html>
