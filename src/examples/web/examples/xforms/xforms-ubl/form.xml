<xforms:model xmlns:xforms="http://www.w3.org/2002/xforms"
        xmlns:order="urn:oasis:names:tc:ubl:Order:1.0:0.70"
        xmlns:cat="urn:oasis:names:tc:ubl:CommonAggregateTypes:1.0:0.70"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xi="http://www.w3.org/2003/XInclude">
    <xforms:instance>
        <form>
            <action/>
            <show-details>true</show-details>
            <view>form</view>
            <errors/>
            <xi:include href="ubl_samp.xml"/>
        </form>
    </xforms:instance>
    <xforms:submission method="post"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine" relevant="count(following-sibling::cat:OrderLine) > 0"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine/cat:LineExtensionAmount[../cat:Quantity castable as xs:decimal
        and ../cat:Item/cat:BasePrice/cat:PriceAmount castable as xs:decimal]"
        calculate="xs:decimal(../cat:Quantity) * xs:decimal(../cat:Item/cat:BasePrice/cat:PriceAmount)"/>
    <xforms:bind nodeset="/form/order:Order/cat:LineExtensionTotalAmount"
        calculate="sum(for $a in ../cat:OrderLine/cat:LineExtensionAmount[. castable as xs:decimal] return xs:decimal($a))"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine/cat:Quantity"
        type="xs:positiveInteger"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine/cat:Item/cat:BasePrice/cat:PriceAmount"
        required="true()"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine/cat:Item/cat:BasePrice/cat:PriceAmount"
        type="xs:decimal"/>
    <xforms:bind nodeset="/form/order:Order/cat:OrderLine/cat:Item/cat:BasePrice/cat:PriceAmount"
        constraint="round(xs:decimal(.) * 100) mod 5 = 0"/>
</xforms:model>
