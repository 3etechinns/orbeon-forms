<!--
    Copyright (C) 2004 Orbeon, Inc.

    This program is free software; you can redistribute it and/or modify it under the terms of the
    GNU Lesser General Public License as published by the Free Software Foundation; either version
    2.1 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU Lesser General Public License for more details.

    The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
-->
<xhtml:html xmlns:xforms="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:ev="http://www.w3.org/2001/xml-events">

    <xhtml:head>
        <xhtml:title>XForms Text Controls</xhtml:title>
        <xforms:model xmlns:xforms="http://www.w3.org/2002/xforms"
                xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xforms:instance id="instance">
                <instance>
                    <age>35</age>
                    <secret>42</secret>
                    <textarea>The world is but a canvas for the imagination.</textarea>
                    <label>Hello, World!</label>
                    <date/>
                    <flavor>v c</flavor>
                    <carrier>fedex</carrier>
                </instance>
            </xforms:instance>
            <xforms:instance id="formatted">
                <formated-instance>
                    &lt;span>
                    &lt;/span>
                </formated-instance>
            </xforms:instance>
            <xforms:instance id="ui">
                <ui>
                    <show-instance>false</show-instance>
                </ui>
            </xforms:instance>
            <xforms:instance id="itemsets">
                <itemsets>
                    <carriers>
                        <item>
                          <label>UPS</label>
                          <value>ups</value>
                        </item>
                        <item>
                          <label>FedEx</label>
                          <value>fedex</value>
                        </item>
                        <item>
                          <label>DHL</label>
                          <value>dhl</value>
                        </item>
                    </carriers>
                    <flavors>
                        <item>
                          <label>Vanilla</label>
                          <value>v</value>
                        </item>
                        <item>
                          <label>Strawberry</label>
                          <value>s</value>
                        </item>
                        <item>
                          <label>Chocolate</label>
                          <value>c</value>
                        </item>
                    </flavors>
                </itemsets>
            </xforms:instance>
            <xforms:bind nodeset="instance('instance')">
                <xforms:bind nodeset="age" constraint="number(.) >= 0"/>
                <xforms:bind nodeset="secret" constraint="string(.) = '42'"/>
                <xforms:bind nodeset="textarea" constraint="string-length(.) > 10"/>
                <xforms:bind nodeset="date2" type="xs:date"/>
                <xforms:bind nodeset="time" type="xs:time"/>
            </xforms:bind>
            <xforms:bind nodeset="instance('ui')/show-instance" relevant=". = 'true'"/>
            <xforms:bind nodeset="instance('instance')/date" type="xs:date" relevant="false()"/>
            <xforms:bind nodeset="instance('formatted')"
                calculate="saxon:serialize(xxforms:call-xpl
                    ('oxf:/oxf-theme/format.xpl', 'data', instance('instance'), 'data')/*, 'html')"/>
            <xforms:submission ref="instance('instance')" id="default-submission" method="post" action="/direct/xforms-controls/post" replace="instance"/>
        </xforms:model>
    </xhtml:head>
    <xhtml:body>
        <xforms:group ref="instance('instance')">
            <xforms:trigger>
                <xforms:label>Text controls</xforms:label>
                <xforms:toggle ev:event="DOMActivate" case="text-controls"/>
            </xforms:trigger>
            <xforms:trigger>
                <xforms:label>Selection controls</xforms:label>
                <xforms:toggle ev:event="DOMActivate" case="selection-controls"/>
            </xforms:trigger>
            <xforms:switch>
                <xforms:case id="text-controls">
                    <xhtml:p>
                        <xforms:input ref="age">
                            <xforms:label xhtml:class="fixed-width">Age:</xforms:label>
                            <xforms:hint>Positive number</xforms:hint>
                        </xforms:input>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:secret ref="secret">
                            <xforms:label xhtml:class="fixed-width">Password:</xforms:label>
                            <xforms:hint>The password is 42 ;)</xforms:hint>
                            <xforms:alert>Invalid password</xforms:alert>
                        </xforms:secret>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:textarea ref="textarea">
                            <xforms:label xhtml:class="fixed-width">Text area:</xforms:label>
                            <xforms:alert>Content of text area has less than 10 characters</xforms:alert>
                        </xforms:textarea>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:input ref="date" class="xforms-date">
                            <xforms:label xhtml:class="fixed-width">Birth date:</xforms:label>
                            <xforms:help>
                                This is supposed to be a help message explaining what a birth date is.
                                But since you already know, it mostly serves the purpose of showing how
                                help messages can be attached to controls, and that they can be pretty
                                long as they can be displayed on multiple lines.
                            </xforms:help>
                        </xforms:input>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:submit submission="default-submission">
                            <xforms:label >Try Submit</xforms:label>
                        </xforms:submit>
                    </xhtml:p>
                </xforms:case>
                <xforms:case id="selection-controls">
                    <xhtml:p>
                        <xforms:select ref="flavor" appearance="full">
                            <xforms:label xhtml:class="fixed-width">Flavors:</xforms:label>
                            <xforms:item>
                              <xforms:label>Vanilla</xforms:label>
                              <xforms:value>v</xforms:value>
                            </xforms:item>
                            <xforms:item>
                              <xforms:label>Strawberry</xforms:label>
                              <xforms:value>s</xforms:value>
                            </xforms:item>
                            <xforms:item>
                              <xforms:label>Chocolate</xforms:label>
                              <xforms:value>c</xforms:value>
                            </xforms:item>
                        </xforms:select>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:input ref="instance('itemsets')/flavors/item[3]/label">
                            <xforms:label xhtml:class="fixed-width">Flavor Name:</xforms:label>
                        </xforms:input>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:select ref="flavor" appearance="compact">
                            <xforms:label xhtml:class="fixed-width"/>
                            <xforms:itemset nodeset="instance('itemsets')/flavors/item">
                                <xforms:label ref="label"/>
                                <xforms:value ref="value"/>
                            </xforms:itemset>
                        </xforms:select>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:select1 ref="carrier" appearance="full">
                            <xforms:label xhtml:class="fixed-width">Carrier:</xforms:label>
                            <xforms:itemset nodeset="instance('itemsets')/carriers/item">
                                <xforms:label ref="label"/>
                                <xforms:value ref="value"/>
                            </xforms:itemset>
                        </xforms:select1>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:input ref="instance('itemsets')/carriers/item[3]/label">
                            <xforms:label xhtml:class="fixed-width">Carrier Name:</xforms:label>
                        </xforms:input>
                    </xhtml:p>
                    <xhtml:p>
                        <xforms:select1 ref="carrier" appearance="minimal">
                            <xforms:label xhtml:class="fixed-width"/>
                            <xforms:item>
                              <xforms:label>UPS</xforms:label>
                              <xforms:value>ups</xforms:value>
                            </xforms:item>
                            <xforms:item>
                              <xforms:label>FedEx</xforms:label>
                              <xforms:value>fedex</xforms:value>
                            </xforms:item>
                            <xforms:item>
                              <xforms:label>DHL</xforms:label>
                              <xforms:value>dhl</xforms:value>
                            </xforms:item>
                        </xforms:select1>
                    </xhtml:p>
                </xforms:case>
            </xforms:switch>
            <xhtml:p style="margin-top: 2em">
                <xforms:switch>
                    <xforms:case id="instance-hidden">
                        <xforms:trigger>
                            <xforms:label>Show instance</xforms:label>
                            <xforms:toggle ev:event="DOMActivate" case="instance-visible"/>
                        </xforms:trigger>
                    </xforms:case>
                    <xforms:case id="instance-visible">
                        <xforms:trigger>
                            <xforms:label>Hide instance</xforms:label>
                            <xforms:toggle ev:event="DOMActivate" case="instance-hidden"/>
                        </xforms:trigger>
                        <xforms:group ref="instance('ui')/show-instance">
                            <xforms:label>XForms instance</xforms:label>
                            <xforms:output ref="instance('formatted')" xhtml:class="xforms-xhtml"/>
                        </xforms:group>
                    </xforms:case>
                </xforms:switch>
            </xhtml:p>
        </xforms:group>
    </xhtml:body>
</xhtml:html>
