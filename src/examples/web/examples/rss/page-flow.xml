<!--
    Copyright (C) 2004 Orbeon, Inc.
  
    This program is free software; you can redistribute it and/or modify it under the terms of the
    GNU Lesser General Public License as published by the Free Software Foundation; either version
    2.1 of the License, or (at your option) any later version.
  
    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU Lesser General Public License for more details.
  
    The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
-->
<config xmlns="http://www.orbeon.com/oxf/controller"
        xmlns:xu="http://www.xmldb.org/xupdate">

    <page path-info="/rss" xforms="form.xml" view="view.xml">
        <action when="/form/action = 'yahoo'">
            <result page="rss" instance-passing="redirect-exit-portal">
                <xu:update select="/">
                    <form xmlns="">
                        <action>rss</action>
                        <rss-feed-descriptor>
                            <items-url>http://www.yahoo.com/old.html</items-url>
                            <items-xpath>//a[starts-with(@href, 's/') and font]</items-xpath>
                            <items-title-xpath>.</items-title-xpath>
                            <items-url-xpath>@href</items-url-xpath>
                            <items-description-xpath/>
                            <channel-title>Yahoo! News - Home Page Stories</channel-title>
                            <channel-link>http://news.yahoo.com/news</channel-link>
                            <image-url>http://us.i1.yimg.com/us.yimg.com/i/us/nws/th/main_142.gif</image-url>
                        </rss-feed-descriptor>
                    </form>
                </xu:update>
            </result>
        </action>
        <action when="/form/action = 'intellij'">
            <result page="rss" instance-passing="redirect-exit-portal">
                <xu:update select="/">
                    <form xmlns="">
                        <action>rss</action>
                        <rss-feed-descriptor>
                            <items-url>http://www.intellij.net/forums/forum.jsp?forum=7</items-url>
                            <items-xpath>//a[starts-with(@href, 'thread.jsp') and @class = 'forum']</items-xpath>
                            <items-title-xpath>.</items-title-xpath>
                            <items-url-xpath>@href</items-url-xpath>
                            <items-description-xpath/>
                            <channel-title>IntelliJ EAP Announcements</channel-title>
                            <channel-link>http://www.intellij.net/</channel-link>
                            <image-url>http://www.intellij.com/images/logo_bg.gif</image-url>
                        </rss-feed-descriptor>     
                    </form>
                </xu:update>
            </result>
        </action>
        <action when="/form/action = 'test' or /form/action = 'rss'">
            <result page="rss" instance-passing="redirect-exit-portal">
                <xu:update select="/">
                    <xu:copy-of select="doc('input:instance')/*"/>
                </xu:update>
            </result>
        </action>
    </page>

    <page id="rss" path-info="/example-resources/rss/rss-feed" xforms="form.xml" model="model.xpl">
        <action when="/form/action = 'test'" action="action/test.xpl"/>
        <action when="/form/action = 'rss'" action="action/rss.xpl"/>
    </page>

    <epilogue url="oxf:/config/epilogue.xpl"/>

</config>
