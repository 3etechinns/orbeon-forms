<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
    Copyright (C) 2004 Orbeon, Inc.

    This program is free software; you can redistribute it and/or modify it under the terms of the
    GNU Lesser General Public License as published by the Free Software Foundation; either version
    2.1 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU Lesser General Public License for more details.

    The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
-->
<group description="Converters" xmlns:p="http://www.orbeon.com/oxf/pipeline">

    <!--
    TODO: o all converters (XML, HTML, Text, XSL:FO, Chart)
          o check that content-type incl. encoding attribute is correctly generated

    -->

    <test description="XML conversion" name="oxf:xml-converter">
        <input name="data" href="oxf:/bizdoc/schema/claim-1.xml"/>
        <input name="config">
            <config>
                <content-type>application/xml</content-type>
                <encoding>io-8859-1</encoding>
                <version>1.0</version>
            </config>
        </input>
        <output name="data">
            <document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string" content-type="application/xml; charset=io-8859-1">&lt;?xml version="1.0" encoding="io-8859-1"?&gt; &lt;claim xmlns="http://orbeon.org/oxf/examples/bizdoc/claim"&gt; &lt;insured-info&gt; &lt;general-info&gt; &lt;name-info&gt; &lt;title-prefix&gt;Dr.&lt;/title-prefix&gt; &lt;last-name&gt;Doe&lt;/last-name&gt; &lt;first-name&gt;John&lt;/first-name&gt; &lt;title-suffix/&gt; &lt;/name-info&gt; &lt;address&gt; &lt;address-detail&gt; &lt;street-name&gt;N Columbus Dr.&lt;/street-name&gt; &lt;street-number&gt;511&lt;/street-number&gt; &lt;unit-number/&gt; &lt;/address-detail&gt; &lt;city&gt;Chicago&lt;/city&gt; &lt;state-province&gt;IL&lt;/state-province&gt; &lt;postal-code&gt;60611&lt;/postal-code&gt; &lt;country&gt;USA&lt;/country&gt; &lt;email&gt;jdoe@acme.org&lt;/email&gt; &lt;/address&gt; &lt;/general-info&gt; &lt;person-info&gt; &lt;gender-code&gt;M&lt;/gender-code&gt; &lt;birth-date&gt;1972-10-01&lt;/birth-date&gt; &lt;marital-status-code&gt;C&lt;/marital-status-code&gt; &lt;occupation&gt;Manager&lt;/occupation&gt; &lt;/person-info&gt; &lt;family-info&gt; &lt;children&gt; &lt;child&gt; &lt;birth-date&gt;2003-02-02&lt;/birth-date&gt; &lt;first-name&gt;Marco&lt;/first-name&gt; &lt;/child&gt; &lt;child&gt; &lt;birth-date/&gt; &lt;first-name/&gt; &lt;/child&gt; &lt;/children&gt; &lt;comments&gt;No comments at this point!&lt;/comments&gt; &lt;/family-info&gt; &lt;claim-info&gt; &lt;accident-type&gt;FOOT&lt;/accident-type&gt; &lt;accident-date&gt;2004-07-06&lt;/accident-date&gt; &lt;rate/&gt; &lt;/claim-info&gt; &lt;/insured-info&gt; &lt;/claim&gt;</document>
        </output>
    </test>

    <test description="HTML conversion" name="oxf:html-converter">
        <input name="data" href="oxf:/examples/tutorial/hello4/ask-name-view.xhtml"/>
        <input name="config">
            <config>
                <content-type>text/html</content-type>
                <encoding>io-8859-1</encoding>
                <public-doctype>-//W3C//DTD HTML 4.01 Transitional//EN</public-doctype>
                <version>4.01</version>
            </config>
        </input>
        <output name="data">
            <document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string" content-type="text/html; charset=io-8859-1">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Hello World Page Flow&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;xforms:group&gt; &lt;p&gt; Please enter your first name: &lt;xforms:input ref="/myform/first-name"&gt;&lt;/xforms:input&gt; &lt;xforms:submit&gt; &lt;xforms:label&gt;Greet Me!&lt;/xforms:label&gt; &lt;xforms:setvalue ref="/myform/action"&gt;next&lt;/xforms:setvalue&gt; &lt;/xforms:submit&gt; &lt;/p&gt; &lt;/xforms:group&gt; &lt;/body&gt; &lt;/html&gt;</document>
        </output>
    </test>

    <test description="Text conversion" name="oxf:text-converter">
        <input name="data">
            <text>
                This is just plain text. It will be output without the <em>text</em> and <em>em</em>
                elements.
            </text>
        </input>
        <input name="config">
            <config/>
        </input>
        <output name="data">
            <document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string" content-type="text/plain; charset=utf-8">
                This is just plain text. It will be output without the text and em elements.
            </document>
        </output>
    </test>

</group>
